#!/bin/ksh
# ############################################################################ #
#       I_LOFT integration facilities. Intergraph Corporation.                 #
#                                                                              #
#       This Korn shell script execute compilations in $LOFT/src/* directories #
#
# ############################################################################ #

#
# 1st reconstruct message file if needed
#
echo "--------------------------------------------------------------"
echo "\tMake in <config/english/messages/src> ..."
echo "--------------------------------------------------------------"
cd ${LOFT}/config/english/messages/src; grmake -k

#
# 2nd reconstruct VLlocate if needed
#
echo "--------------------------------------------------------------"
echo "\tMake in <src/locate> ..."
echo "--------------------------------------------------------------"
cd ${LOFT}/src/locate ; grmake -k

#
# 3rd reconstruct VLpin_jig if needed
#
echo "--------------------------------------------------------------"
echo "\tMake in <src/pin_jig> ..."
echo "--------------------------------------------------------------"
cd ${LOFT}/src/pin_jig ; grmake -k

#
# 4th reconstruct VLtemplate if needed
#
echo "--------------------------------------------------------------"
echo "\tMake in <src/template> ..."
echo "--------------------------------------------------------------"
cd ${LOFT}/src/template ; grmake -k

cd ${LOFT}
for dir in `find src config -type d -print`
do
    if [ -f ${LOFT}/$dir/makefile ]; then 
	echo "--------------------------------------------------------------"
        echo "\tMake in <$dir>"
	echo "--------------------------------------------------------------"
        cd ${LOFT}/$dir
        grmake -k
    fi
done

exit 0 
