/***************************************************************************
 * I/STRUCT
 *
 * File:	api/APImdjoint.u
 *
 * Description:
 * 
 * This ppl modify a joint using the API vs$modify_joint().
 *
 * Dependencies:
 *
 * History:
 *	MM/DD/YY	AUTHOR		DESCRIPTION
 *			i-paris		creation date
 *	04/17/1998	Manoj 		CR 1798000807
 *                                      Facility to change 
 *                                      1. Field weld 
 *					2. Weld Position 
 *                                      3. Shrinkage Ratio
 *
 ***************************************************************************/

#include "OMminimum.h"
#include "cieveryone.h"
#include "cievent.h"
#include "cilocate.h"
#include "cisend.h"
#include "vsAPImacros.h"

extern void printf() ;

/*----------------------------------------------------------------------------*/
wakeup() { message( "API: Modify Joint" ) ; }
/*----------------------------------------------------------------------------*/
main() {
	long		 sts,
			 msg ;
	struct GRid	 jointId ;
	struct GRmd_env  jointEnv ;
	int		 weldInfo,
			 weldSide,
			 wpos,
			 w ;
	double		 allowance,shrk ;
	wpos = 3;
	w    = 1; 
	shrk = 3.5 ; 

	while( TRUE ) {
	ci$locate(
		prompt		= "Identify joint to modify",
		classes 	= "VSjoint",
		properties	= LC_LC_ONLY | LC_DP_ONLY | LC_RW,
		owner_action	= LC_RIGID_COMP  |
				  LC_RIGID_OWNER | LC_FLEX_COMP |
				  LC_FLEX_OWNER  | LC_REF_OBJECTS,
		obj		= &jointId.objid,
		osnum		= &jointId.osnum,
		md_env		= &jointEnv ) ;

	weldInfo = VS_WI_Fw_Mt_No ;
	weldSide = VS_WS_Both ;
	allowance = 0.25 ;

	sts = vs$modify_joint( msg		= &msg,
			       jointId		= &jointId,
			       weldInfo		= &weldInfo,
			       weldSide		= &weldSide,
			       fieldWeld        = &w,
			       weldPosition     = &wpos,
			       shrinkage        = &shrk,
			       allowance	= &allowance ) ;

	if( !( sts & 1 & msg ) ) printf( "Error in modification of joint\n" ) ;
	}
}
/*----------------------------------------------------------------------------*/
