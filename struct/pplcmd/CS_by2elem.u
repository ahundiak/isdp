/*
	------------------------------------------------------------------

	File Name :		CS_by2elem.u

	Description :

		This macro constructs a coordinate system 
		between a beam and a beam or plate.
		The coordinate system will be later used to place an
		end cut macro.



	History :
	
	Dec 29, 1994  : creation date.

	------------------------------------------------------------------
*/

#include <stdio.h>
#include "cieveryone.h"
#include "cimacros.h"
#include "ci_mac_def.h"
#include "godef.h"
#include "exmacros.h"
#include "macro.h"
#include "nddef.h"
#include "macro.h"
#include "msdef.h"
#include "bserr.h"
#include "bstypes.h"
#include "msdef.h"
#include "EMSdpb.h"
#include "growner.h"
#include "igrdp.h"
#include "grmacros.h"
#include "parametric.h"
#include "AS_status.h"
#include "vsdpb.h"
#include "cotxmacros.h"
#include "DItypedef.h"
#include "DIdef.h"
#include "DIglob.h"
#include "DIprims.h"
#include "DImacros.h"
#include "vscsby2el.h"


	struct 	GRid		CI_MACRO_ID;
	struct 	GRvg_construct	cst;
	struct 	GRmd_env	MOD_ENV;
	struct 	IGRdisplay	dis;
	struct 	GRid		GRidList[MAX_FEET];


/*
 * externals
 */

	extern  GRclassid       OPP_VSplate_class_id;
	extern  GRclassid       OPP_VSbeam_class_id;
	extern  GRclassid       OPP_VSimgFeature_class_id;

        extern IGRdouble	fabs();
	extern IGRint 		init_cnst_list();
        extern IGRlong		VSconstruct_cs_by_2_elem();
        extern IGRlong		VDSextract_csb2el_info();



/* ========================================================================= */

main (){

IGRlong			stat;
GRobj 			ci_mac_def1;
IGRchar	 		*temp_names[MAX_TEMP], *feet_names[MAX_FEET];
IGRchar	 		tempBuff[MAX_TEMP*MAX_CHAR_FEET];
IGRint			temp_types[MAX_TEMP], j, k;


  /*
   * templates definition
   */

  temp_names[IDX_CS_ELEM1] = NAM_CS_ELEM1;
  temp_types[IDX_CS_ELEM1] = other_generic | macro_generic;
  temp_names[IDX_CS_ELEM2] = NAM_CS_ELEM2;
  temp_types[IDX_CS_ELEM2] = other_generic | macro_generic;

  for (k=IDX_CS_OPT; k<MAX_TEMP; k=k+1)
  {
    j = k * MAX_CHAR_FEET;
    sprintf(&tempBuff[j],"option%d",(k-2));
    temp_names[k] = &tempBuff[j];
    temp_types[k] = parameter_generic | double_type;
  }
  feet_names[IDX_CS_CS] = NAM_CS_CS;
  feet_names[IDX_CS_SRF] = NAM_CS_SRF;
  feet_names[IDX_CS_IDXSRF] = NAM_CS_IDXSRF;

  /*
   * macro definition creation;
   */

   ci_mac_def1   = NULL_OBJID;

   ac$cimacdef( 	cimacdef          = ci_mac_def1,
			status 	          = &stat, 	
			name              = MAC_CS_2EL,
              		temp_num          = MAX_TEMP, 	
			temp_names        = temp_names,
			temp_types        = temp_types,
	      		extern_feet_num   = MAX_FEET, 	
			extern_feet_names = feet_names 		);
  return 1;
}

/* ========================================================================= */
