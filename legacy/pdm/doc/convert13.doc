
I/PDM - I/PDU 2.1.x Converter Guide

The 2.1.x version of I/PDM - I/PDU contains many features that
were not found in the 1.3.x version.  Before you can
use the features of 2.1.x, you must convert the 1.3.x
database to the 2.1.x format.  You can do this by running the
converter that is delivered with the 2.1.x software.  This
document contains the information needed to convert both a
1.3.x database to the 2.1.x format.

:I/PDM - I/PDU Conversion Process 1.3.x to 2.1.x:

The following information explains the process for converting
a 1.3.x database to a 2.1.x.

Administrative User Account

The 2.1.x version of I/PDM requires an administrative user
account called nfmadmin.  This account is used to initialize
I/NFM and I/PDM and must be passworded.

The following steps explain how to add the this user and set
up the

1.   Log onto the the node which will be designated as the
     I/PDM server.

2.   Create a user account called nfmadmin on this node.

     Note:

     This account must have a password.

3.   If your RDBMS is INFORMIX, In the .profile file of the
     nfmadmin account, add the following information, where
     /usrx is the partition that applies for each entry:

     INFORMIXDIR=/usrx/informix
     SQLEXEC=/usrx/informix/lib/sqlexec if using Standard Engine INFORMIX

     OR

     SQLEXEC=/usrx/informix/lib/sqlturbo if using on-line INFORMIX

     export INFORMIXDIR SQLEXEC 
     If your database will reside in a directory other than
     /usr/nfmadmin, you must also include the following line in
     your .profile, and export that entry.

     DBPATH=/usrx/<I/NFM database administrator name>

     export INFORMIXDIR SQLEXEC DBPATH 

I/PDM Server Software Requirements and Installation

The following is the software requirements and the order in
which the software needs to be loaded.

 Nucleus software 6.0 or newer

 Relational Database (INFORMIX OnLine or INFORMIX SE)

 Network protocol (XNS or TCPIP) Reboot system prior to
     loading the RIS software.

 INFORMIX Dataserver RIS Server (RISXC - 3.x)

 RIS Client (RISCCU - 3.x)

 I/NFM (3.x)

 I/PDM (2.x)

RIS Server Node

The examples provided below will help you to record
information about each node that you want to use for I/NFM -
I/PDM and to determine the software that will be installed on
each node.

               The RIS Server Node

               Nodename        __________________
               Username        __________________
               Password         __________________
               Pathname        __________________
               Software          __________________ 

I/PDU Client Node

Fill in the information in the blanks below for the I/PDU client
nodes.  You will probably designate more than one or two
machines as I/PDU client nodes.  If so, make a list of all
machines that will need access the I/NFM-I/PDM server, and
record them below.  All I/PDU client nodes are required to have
the NFMfileserver and the NFMdaemon software.


                   The I/PDU Client Nodes

               Nodename       __________________
               Username       __________________
               Password       __________________
               Pathname       __________________

               Nodename       __________________
               Username       __________________
               Password       __________________
               Pathname       __________________ 

Loading I/NFM

The following prompts appear when downloading I/NFM
software,

Install I/NFM Forms Combined Client/Server Software? (y/n/h) [n]
Install I/NFM Alphanumeric Combined Client/Server Software? (y/n/h) [n]
Install I/NFM Server Software? (y/n/h) [y]

Key in y to load the I/NFM multi-user server software.

Install I/NFM PC Software? (y/n/h) [y] 
Install I/NFM Workflow Generator? (y/n/h) [y]
Install I/NFM Administrator Utility? (y/n/h) [y] 
Install I/NFM Bulk Loader? (y/n/h) [y]
Install I/NFM 2.0 to 3.0 Schema Converter? (y/n/h) [y] 
Install I/NFM Forms User Interface? (y/n/h) [y]
Install I/NFM Help for the Forms Interface? (y/n/h) [y]
Install I/NFM Alphanumeric Interface? (y/n/h) [y]
Install I/NFM Command Line Interface? (y/n/h) [y]

Note:

RESPOND TO EACH PROMPT AS INDICATED ABOVE FOR THE PDM SERVER.  RESPOND n
to each when
loading software on the client machines.

If you keyed in n to all of the above prompts, the following prompt
appears.

Install I/NFM File Server and Utility Software? (y/n/h) [y]

Note:

This is the software that will be needed to load on all I/PDU client
workstations.

The following files will be be generated:

        /etc/nfmd.conf
        /etc/init.d/nfm

Installing I/PDM

The following prompts appear when you download I/PDM,

Install the standard I/PDM platform locally (y/n)? [y]
Install the 2.1.0 release of I/PDM (y/n)? [y]
Install the I/PDM Help Files locally (y/n)? [n]
The installation will write an entry into the /etc/nfmd.conf file
and also an entry in the /usr/ip32/inc/server.dat file.

Creating 2.1 Database

After you have downloaded the software, you are ready to
create the 2.1 database.  The following steps explain how to
create this database.

1.   Login into the nfmadmin account created on the I/PDM
     server.

2.   At the dollar ($) prompt, key in the following line exactly
     as shown as below:

     infxcreate <user_database_name> -e S

     Where <user_database_name is the 2.1 database name and S represents
     standard engine
     INFORMIX

     OR

     infxcreate <user_database_name> -e O

     Where <user_database_name is the 2.1 database name and O represents
     on-line INFORMIX

Note:

If you create your database under a login other than
nfmadmin, you will need to access isql and grant dba to the
nfmadmin account for that database.  This must be done
before you can initialize I/NFM.

Initializing I/NFM

The following steps explain how to initialize I/NFM.

     You should be logged into the RIS client node (or where the
     I/NFM software resides) using the nfmadmin account
     name.

1.   At the $ prompt, key in /usr/ip32/nfm/bin/Nfminit

     A series of forms appear on the screen.  Where applicable,
     defaults are displayed in brackets.  Modify and/or accept
     question by pressing the <PF1> key. If you want to
     terminate the process at any time while you are answering
     the questions, press the <PF3> key.

     Note:

     Before you begin to answer the following questions, you
     might want to review the information that appears below
     each question, to ensure that you have the appropriate
     information to respond to the initialization.

2.   The first set of questions adds the administrator server
     node to I/NFM.

     I/NFM Server Node Info

        Attribute      Datatype

     Node Description   char(20)   [I/NFM Server Node ]
     TCP/IP             char(1)   [y ]
     XNS                char(1)   [y ]
     DECNET             char(1)   [n ]
     NETWARE            char(1)   [n ]
     NFS                char(1)   [n ]



     Node Description       --- I/NFM Server node description.  This
                            is also the RIS client node.
     TCP/IP                 --- Does TCP/IP exist on the I/NFM
                            server node?  If the answer to this
                            question is yes, then TCP/IP will be
                            used during I/NFM initialization, even
                            if XNS is available.
     XNS                    --- Does XNS exist on the I/NFM server
                            node?
     DECNET                 --- Does DECNET exist on the I/NFM
                            server node?
     NETWARE                --- Does NETWARE exist on the I/NFM
                            server node?
     NFS                    --- Does NFS exist on the I/NFM server
                            node?

3.   This group of questions adds the administrator storage
     area to I/NFM.

     I/NFM Storage Area Info

        Attribute      Datatype

     Storage Area       char(14)   [nfm Name                          ]
     User Name          char(14)   [nfmadmin ]
     Password           char(14)   [ ]



     Storage Area Name      --- The name of the default file storage
                            location.  This is the logical name for
                            the storage area, not the nodename, and
                            is the home directory for the I/NFM
                            server machine corresponding to the
                            I/NFM administrator login directory.
     Username               --- The username for entry on the I/NFM
                            server node.
     Password               --- The password for entry on the I/NFM
                            server node.  This is the password of
                            the nfmadmin account that was created in
                            the first step of this document.

4.   These two questions add the administrator user to I/NFM.

     I/NFM Administrator Info

        Attribute      Datatype

     Description        char(20)   [I/NFM Administrator    ]
     Mail Address       char(30)   [nfmadmin ]



     Description            --- Description of the I/NFM
                            Administrator.
     Mail Address           --- The Electronic Mail Address of the
                            I/NFM Administrator.

5.   This last group of questions gathers information to be used
     in the I/NFM initialization.

     RDBMS Info

        Attribute      Datatype

     Server Name        char(9)   [nfm ]
     Environment Name   char(9)   [nfm ]
     RDBMS Type         char(10)   [informix ]
     RDBMS Home         char(50)   [/usr/informix Directory  ]
     RIS Database       char(50)   [/usr/nfmadmin/nfm Path                   
     nt Node            char(50)   [<your node name> ]
     Environment        char(3)   [xns
     Network                      ]
     Schema Name        char(14)   [nfm ]
     Schema Password    char(14)   [ ]
     Environment        char(14)   [nfmadmin
     Username                      ]
     Environment User   char(14)   [
     Passwd                        ]



     Server Name            --- The suffix of the nodename broadcast
                            for the I/NFM server ("nfms_nfm").
     Environment Name       --- The suffix of the environment
                            created ("nfme_nfm").  If more than one
                            nfm/ris database will reside on the
                            network, each environment must have a
                            unique suffix.
     RDBMS Type             --- The type of Relational Database
                            Management System, INFORMIX, INGRES,
                            ORACLE, or DB2.
     RDBMS Home Directory   --- Where the RDBMS exists (pathname).
     Database Path (Path    --- For Standard Engine INFORMIX, the
     w/SE)                  location (full pathname) of the I/NFM
                            database created.  You must use the full
                            pathname even if the database was
                            created in /usr/nfmadmin.
     RIS Database Path      --- For online INFORMIX, the RIS
                            database path should be the name of the
                            database, for example nfm.
     Environment Node       --- Node name for the I/NFM environment
                            and the RIS server.
     Environment Network    --- The type of network on the RIS
                            server.  This depends on whether you
                            want to use XNS or TCP/IP.
     Schema Name            --- The I/NFM database schema name to be
                            created through the I/NFM
                            initialization.  This should be what the
                            administrator wants the name to be.
     Schema Password        --- The I/NFM database schema password.
                            This password is required.
     Environment Username   --- The I/NFM database user account on
                            the RIS server.
     Environment User       --- The I/NFM database user password on
     Passwd                 the RIS server.

When the initialization is complete, the system will respond
with the message Successful Completion.

Initializing I/PDM

The following steps explain how to initialize I/PDM.

1.   Log onto the I/PDM server using the nfmadmin account

2.   At the dollar($) prompt, key in:

     /usr/ip32/pdm/bin/PDMinit nfmadmin <password>
     <env_name> 
        or 
     /usr/ip32/pdm/bin/PDMinit [for form input] 

     Where /usr represents the partition where I/PDM is loaded;
     nfmadmin is the administrator account; <password> is the
     password of the admin account; <env_name> is the
     environment name given in the I/NFM initialization; 

A screen will be displayed which will echo each I/PDM
catalog/table that is being created. Upon successful
initialization, a message will be displayed stating the
success.  If a failure should occur, an appropriate message
will be displayed.  For a complete view of the I/PDM
initialization, refer to Administrator Setup in the I/PDM
Reference Manual.

Backup of Database/Storage Areas

The following information explains how to back up the
database.

INFORMIX Standard Engine

For an INFORMIX Standard Engine database:

1.   Log onto the I/PDM server into the account in which the
     database(s) reside.

2.   To backup to tape:

     a.   Key in find pdm.dbs -print | cpio -omv -O /dev/rmt/rt0

     b.   Key in find <userdb>.dbs -print | cpio -omv -O
          /dev/rmt/rt0

3.   To backup to disk:

     a.   Key in find pdm.dbs -print | cpio -omv | compress >
          /usr#/pdm.cpio

     b.   Key in find <userdb.dbs> -print | cio -omv | compress
          > /usr#/<userdb>.cpio

OnLine INFORMIX

To run dbexport.

1.   Key in dbexport pdm.

     This create a pdm.exp directory.

2.   Key in dbexport <userdb>

     This creates a <userdb> directory

To archive the database:

1.   Log in as Informix.

2.   Allocate the tape drive.

3.   Make sure that the tape device ( i.e. /dev/rmt/rt0) on
     database machine has read and write privileges.

4.   Go into tbmonitor utility.

5.   Select the archive option.

6.   Select the tape parameters option.

7.   Set the tape device and the tape size.

8.   Select the create option.

9.   Select the appropriate archive level which should be zero.

     -  Level 0 is full database archive.

     -  Level 1 is Logical log archive.

     -  Level 2 is an incremental archive.

10.  Deallocate the tape drive at completion.

Converter Requirements

The following are requirements for converting the 1.3.x
database:

 All files must be checked in.

 All users must be logged out of I/PDM software.

 There must be enough space and memory on the 
     workstation to convert the database. It is recommended to
     dedicate a workstation to convert the database to ensure
     that the conversion will not be interrupted by other
     resident processes.  Free disk space should consist of 2
     times the size of the database being converted.  For
     example, if you have a database that is 100,000 blocks, an
     additional 100,000 blocks is required.

 There is no need to move the design files.  The converter
     assumes that all files are checked in and creates a checkin
     storage area.

 The converter creates two log files in the current working
     directory to keep track of the converted parts and catalogs. 
     PDMcvt.LOG logs the data converted successfully.
     PDMcvt.PROB logs the data converted unsuccessfully.  If
     for some reason (power failure or system crash), the
     converter terminates abnormally, restart the converter and
     it will resume at point of termination.

 Database conversion must be complete prior to executing
     the PDU object space conversion.

Estimated Conversion Time

The approximate time for the conversion depends on the size
of the database. Plan your conversion on the lean period of
your design process.  You need the following information to
estimate your conversion time.

     x = Total number of parts in the database
     y = Total number of catalogs in the database
     z = Number of rows in the pdm_saved_views table
     s = Number of rows in the pdm_cit table
     b = Number of BOMs created
     c = Number of BOM mappings = number of catalogs
For a C100 chipset workstation (IP32C, IP220), use the
following formula:

T = Time for conversion in seconds
T = ( x * 3) + (y * 150) + (z * 3) + (s * 11) + (b * 120) + (c * 1000)
+ 20% of this time for other data conversion

D = Days needed to convert D = T/86400 
For a C300 chipset (6000, 6240, 2000), use the following
formula.

T = Time for conversion in seconds
T = ( x * 2) + (y * 120) + (z * 2) + (s * 8) + (b * 90) + (c * 600)
+ 10% of this time for other data conversion
D = Days needed to convert
D = T/86400
For example:

     x = 8000 = Total number of parts in the database
     y =   50 = Total number of catalogs in the database
     z = 5000 = Number of rows in the pdm_saved_views table
     s = 1000 = Number of rows in the pdm_cit table
     b =   50 = Number of created BOMs
     c =   50 = Number of BOM mappings = number of catalogs
Converting on a 6000 workstation.

T = ( 8000 * 2) + (50 * 120) + (5000 * 2) + (1000 * 8) + (50 * 90) +
(50 * 600) = 74500 secs + (0.1 * 74500) = 81950 secs

D = 81950/86400 = .949  ~  1 day 
A shell script is delivered in the /usr/ip32/pdm/doc/cvt
directory called time.sh.  This script will produce the time for
converting the PDM 1.3.0 database.  Copy this script to the
directory in which the 1.3.x database is located. Execute the
script. Other scripts delivered in the /usr/ip32/pdm/doc/cvt
directory are:

acl.sh

This script updates the acl nos to 6.  This script will not need
to be executed.

assembly.sh

This script gets all the assemblies in the database.  This script
can be executed after the database is convert to report on all
assembly parts.

atomic.sh

This script gets the atomic parts in the database.  This script
can be executed after the database is converted to report on
all atomic parts.  The output file can be used for the batch
processing of orphan cell part pointers to GRpart.  See Object
Space Conversion for more information.

acldef.sh

This script defaults the PDM_PART_ACL during ADD_PART. 
This script will not need to be executed.

ch_part.sh

This script gives the n_cifilename, given the catalog,partnum,
and revision.

noitem.sh

This script compares the old and converted database.  This
script also creates two files:

Nitem.list --- Converted database information. [PDM2.1]
Oitem.list --- Old database information.[PDM1.3]
Compare these two files to ensure that all data was converted
properly.

I/PDM Conversion Execution

The following steps explain how to execute the I/PDM
converter.

1.   Login using the account in which the 1.3 database(s) are
     resident if using standard engine INFORMIX.

     Note:

     If OnLine INFORMIX is the database engine, login using the
     nfmadmin account.

2.   Key in /usr/ip32/pdm/pdm/bin/PDMconvert at the dollar sign
     prompt to initiate the converter. The following menu is
     displayed.

  ------------------------------------------------------------------------------

     Environment Name       [           ]
     Username               [nfmadmin   ]
     Password               [           ]
     Old sys database       [pdm        ]
     Activity Monitor       [/dev/ttn01 ]
     Log File               [PDMconvert.LOG ]
     NFM Debug              [/dev/null  ]
     SQL Debug              [/dev/null  ]
     MEM Debug              [/dev/null  ]
     OLDSQL Debug           [/dev/null  ]
     Converter Debug        [/dev/null  ]
     NET Debug              [/dev/null  ]

  ------------------------------------------------------------------------------

                                                                  
                  PF1 - To Resume Conversion
                  Backspace - To delete
                  Crtl-C - To exit.

    
------------------------------------------------------------------------------- 

3.   Enter the Environment Name and Password for the
     database that you want to convert. This is the database
     that was created using the infxcreate statement.

     Environment name       --- database created
                            using "infxcreate".
     Username               ---  administrator
                            account in which the
                            database was created.
     Password               ---  password for the
                            administrator account.
     Old system database    --- this is pdm by
                            default in the 1.3
                            software and requires no
                            change.
     Activity Monitor       --- information that
                            comes to the screen
                            stating what is being
                            executed within the
                            conversion.  This
                            information can be
                            directed to a file.  The
                            file will become very
                            large, thus disk space
                            must be available.
     Log File               --- information is not as
                            detailed as the activity
                            monitor but gives basic
                            information for the
                            process.

     All other items are used when there is a failure in the
     convert process.  If a failure should occur, call I/PDM
     support for assistance.

4.   Press the <PF1> key to accept the information. The
     following menu is displayed.

 ------------------------------------------------------------------------------
           SELECT DATABASE


                                                                        
                      [<Enter> to select;
                                                                        
                      <PF1> to Accept;
                                                                        
                      <PF3> to Cancel]

          DATABASE1 DATABASE2 DATABASE3

 -------------------------------------------------------------------------------

5.   Highlight the desired database.

6.   Press the <Enter> key on the numerical keypad to select
     the database.

7.   Press the <PF1> key to accept the selected database. The
     following menu is displayed.

 -------------------------------------------------------------------------------

                                                                        
                                                                        
SELECTION
                                                                        
                                           MENU

     Users                  [n ]
     Nodes                  [n ]
     Storage Areas          [n ]
     Catalogs/Items         [n ]
     Graphic Saved Views    [n ]
     Assemblies (cit)       [n ]
     BOMs/BOM Content       [n ]
     Convert to 2.1.0       [n ]

 -------------------------------------------------------------------------------

                         Control C - To Terminate Conversion now
                         PF1       - To Resume Conversion now
                         Type "abort" <RETURN> to terminate
                         Backspace/Delete - To delete
 -------------------------------------------------------------------------------

8.   Key in y for the tables you want to convert.

     Note:

     The tables must be converted in the order they are listed in
     the menu.  You may convert one or more tables at a time.
     No (n) is the default value.

9.   Press the <PF1> key to convert the database.

     OR

     Press <Ctrl> C to terminate the conversion.

Complete Database Conversion

After you have run the I/PDM converter, you are ready to
complete the database conversion. The following things
should be done to complete the conversion.

1.   To verify the accuracy of the conversion, copy noitem.sh
     from the /usr/ip32/pdm/doc/cvt directory to the directory in
     which the databases are resident.

2.   Execute the script.

     The script compares the old and converted database and
     creates two files:

     Nitem.list - Converted database information (PDM 2.1)
     Oitem.list - Old database information (PDM 1.3)

3.   If results are not what is expected, contact I/PDM support
     for assistance.

If users had been added to the old database, it will be
necessary to add the users to the
PDM_PART_WORKFLOW/ACL.  This can be accomplished by
executing the I/NFM Utility.

1.   Log in as nfmadmin.

2.   At the dollar prompt, key in /usr/ip32/nfm/bin/Nfmalpha -A

3.   Select the appropriate server from the list of servers

4.   Key in the username/password of the nfmadmin account

5.   Select the environment if it is not the same as the server
     from the list of environments.

6.   Press the <PF1> key.

7.   Add the users to a user-class.

     a.   Highlight Workflow and press <Return>.

     b.   Press left arrow until ACLS is highlighted and press
          <Return>.

     c.   Press left arrow until Add_Class_Users is highlighted
          and press <Return>.

          If a Workflow or ACL is not in the active area of the
          menu, then a list of workflows is displayed.

     d.   Use the down arrow key until the desired workflow is
          highlighted.

     e.   Press the <Enter> key and then the <PF1> key.

          A list of ACLS will be displayed.

     f.   Use the down arrow key until the desired ACL is
          highlighted.

     g.   Press the <Enter> key and then the PF1 key.

          A list of users is displayed.  Note that the message will
          read something like "Choose users for class 'manager'". 
          The first user class will be the highest level class user
          defined in the workflow.  Example:  PDM default
          workflow class users are:  manager and designer with
          the manager being the highest level.

     h.   Use the down arrow key to highlight the user to be
          added to the class.

     i.   Press the <Enter> key and then press the <PF1> key.

          Note:

          If multiple users are to be added to the class, then
          highlight the second user prior to pressing the <PF1>
          key.

          The next user class is listed.

     j.   If there is not a user to be added to the particular class
          that is displayed, press <PF1> which will move you to
          the next class.

     k.   After all users are added, key in e until you see Logout.

     l.   Highlight Logout and press <Return>.

8.   After the database has been converted properly, drop the
     PDM 1.3.0 database.

     a.   Key in infxdrop <pdm>

     b.   Key in infxdrop <userdb>

Object Space Conversion

All I/EMS files will need to be converted to the 2.1 file format. 
This can be accomplished using the EMS supplied converter.

It is also necessary for I/PDM to convert the part pointers in
all EMS object spaces. This conversion will convert the I/PDU
orphan cell to an EMS GRpart.  The process can be
accomplished in two ways:

1.   Batch mode processing for atomic parts.

2.   Conversion on the active file.

Batch Mode Processing for Atomic Parts

The ppl program cvt_atomic.u is delivered in the
/usr/ip32/pdu/ppl/bin directory.  This ppl program accepts an
input filename which consists of a list of atomic part files. 
This file is generated by a script called atomic.sh which is
delivered in the /usr/ip32/pdm/doc/cvt directory.  The following
steps explain how to execute this script.

1.   Copy the script to the directory in which the database
     resides.

2.   Execute the script.

3.   Copy the output file to the storage area in which the
     atomic parts are checked into.

4.   Activate I/EMS in the storage area login of the atomic
     parts.

     Note:

     You do not need to log into I/PDU.

5.   Key in:  ci=cvt_atomic.u

The converter will convert those files listed in the input file
and will product two output files:

1.   success.log --- consists of all files that have successfully
     been converted.

2.   failure.log --- consists of all files on which conversion has
     failed.

Note:

Call I/PDM support if files failed in conversion.

Conversion on The Active File

The PPL program cvt_objspace.u is delivered in the
/usr/ip32/pdu/ppl/bin directory.  This PPL program performs the
atomic as well as the assembly conversion on the active file.
The user must be logged into I/PDM for the conversion to take
place.  This program will automatically be kicked off in the
begining of the design session.

Note:

There is not a batch conversion provided for assemblies.

