
I/PDM - I/PDU 2.1.x Converter Guide

The 2.1.x version of I/PDM - I/PDU contains many features that
were not found in the 2.0.x and 1.4.x versions.  Before you can
use the features of 2.1.x, you must convert the 2.0.x. and 1.4.x
databases to the 2.1.x format.  You can do this by running the
converter that is delivered with the 2.1.x software.  This
document contains the information needed to convert
2.0.x database to the 2.1.x format.

I/PDM Server Software Requirements and Installation

The following is the software requirements and the order in
which the software needs to be loaded.

 Nucleus software 6.0 or newer

 Relational Database (INFORMIX OnLine or INFORMIX SE, ORACLE, INGRESS, DB2)

 Network protocol (XNS or TCPIP) Reboot system prior to
     loading the RIS software.

 INFORMIX Dataserver RIS Server (RISXC - 3.2.2.x)

 RIS Client (RISCCU - 3.2.x)

 I/NFM (3.2.x)

 I/PDM (2.1.x)

Loading I/NFM

The following prompts appear when downloading I/NFM
software,

Install I/NFM Forms Combined Client/Server Software? (y/n/h) [n]
Install I/NFM Alphanumeric Combined Client/Server Software? (y/n/h) [n]
Install I/NFM Server Software? (y/n/h) [y]

Key in y to load the I/NFM multi-user server software.

Install I/NFM PC Software? (y/n/h) [y] 
Install I/NFM Workflow Generator? (y/n/h) [y]
Install I/NFM Administrator Utility? (y/n/h) [y] 
Install I/NFM Bulk Loader? (y/n/h) [y]
Install I/NFM 2.1 to 3.0 Schema Converter? (y/n/h) [y] 
Install I/NFM Forms User Interface? (y/n/h) [y]
Install I/NFM Help for the Forms Interface? (y/n/h) [y]
Install I/NFM Alphanumeric Interface? (y/n/h) [y]
Install I/NFM Command Line Interface? (y/n/h) [y]

Note:

RESPOND TO EACH PROMPT AS INDICATED ABOVE FOR THE PDM SERVER.  RESPOND n
to each when loading software on the client machines. Then NFMfilserver,
and NFMdaemon gets loaded on the client. 

If you keyed in n to all of the above prompts, the following prompt
appears.

Install I/NFM File Server and Utility Software? (y/n/h) [y]

Note:

This is the software that will be needed to load on all I/PDU client
workstations.

The following files will be be generated:

        /etc/nfmd.conf
        /etc/init.d/nfm

Installing I/PDM

The following prompts appear when you download I/PDM,

Install the standard I/PDM platform locally (y/n)? [y]
Install the 2.1.0 release of I/PDM (y/n)? [y]
Install the I/PDM Help Files locally (y/n)? [n]

Backup of Database/Storage Areas

The following information explains how to back up the
database.

  INFORMIX Standard Engine

    1.1 Log in to the I/PDM server account in which the database(s) resides.
        [nfmadmin]

    1.2 To backup to tape:

      a. Key in find <env> -print | cpio -omv -O /dev/rmt/rt0

      b. Key in find <userdb>.dbs -print | cpio -omv -O /dev/rmt/rt0

    1.3. To backup to disk:
         To backup the entire disk use the diskcopy utility.

      a. Key in find <env> -print | cpio -omv | compress > /usr#/<env>.cpio

      b. Key in find <userdb>.dbs -print | cpio -omv | compress >
         /usr#/<userdb>.cpio

  OnLine Engine

    1.1 Log in to the I/PDM server account in which the database(s) resides.
        [nfmadmin]

    1.2 To backup to tape:

      a. Key in find <env> -print | cpio -omv -O /dev/rmt/rt0

      b. key in dbexport <userdb>

      c. key in find <userdb.exp> -print | cpio -omv -O /dev/rmt/rt0

    1.3 To backup to disk

      a. Key in find <env> -print | cpio -omv | compress > /usr#/<env>.cpio

      b. key in dbexport <userdb>

      c. key in find <userdb.exp> -print | cpio -omv | compress > /usr#/<userdb>         .cpio 


    1.4 To archive the database:

      a. Log in as informix

      b. Allocate the tape drive

      c. Make sure that the tape device (/dev/rmt/rt0) on the database machine
         has read and write privileges

      d. Access the tbmonitor utility

      e. Select the archive option
         -  Level 0 is full database archive
         -  Level 1 is Logical log archive
         -  Level 2 is an incremental archive

      f. Select the tape parameters option

      g. Set the tape devie and the tape size

      h. Select the create option

      i. Select the appropriate archive level which should be zero

      j. Deallocate the tape drive at completion

    

  ORACLE:

    To export an ORACLE database

    1.1 Key in EXP <userdb> <username/passwd>

    To import an ORACLE database

    1.2 Key in IMP <userdb> <username/passwd>

  For additional information about backing up a database see the appropriate
  Relational Database Management Systems Administrators Guide.


2.0 Converter Requirements

    2.1 In the PDM2.0.x conversion to PDM2.1.x there is no need to initialize 
        a new environment and database. There is no need to run risupgrade
        utility to move PDM2.0 database to PDM2.1 database.

    2.2 The converter executable /usr/ip32/pdm/bin/PDMcvt20 must be owned by
        root, group sys with sticky bit set. To set the sticky bit do the
        following:

        a. Become superuser

        b. Key in chmod 6775 PDMcvt20

    2.3 All files must be checked in

    2.4 All users must be logged out of I/PDM software

    2.5 Disk Space requirements
        To convert a 2.0.x database to 2.1.x database there are no
        additional disk space requirements due to the database growing
        in size.

    2.6 It is recommended to have a dedicated machine for the converter 
        without any interruption from other memory resident processes. 

    2.7 There is no need to move the design files. The converter assumes that
        all files are checked in and creates a checkin storage area.

    2.8 If for some reason the converter terminates abnormally (power failure
        or system crash), restart the converter and it will resume at point
        of termination.

    2.9 If using the INFORMIX relational database, it is not required but 
        recommened that the converter be run with OnLine engine for best 
        performance. If you are planning on converting the database from 
        Standard Engine to OnLine Engine follow these steps.
        For additional information refer to the INFORMIX reference manuals.

         2.9.1 Export the data
               key in dbexport <userdb>

         2.9.2 Newprod INFORMIX OnLine Engine

         2.9.3 Initialize INFORMIX OnLine Engine

         2.9.4 Import the data
               key in dbimport <userdb>

         2.9.5 Change the database logging mode to ANSI
          2.9.5.1 Login as INFORMIX user.
          2.9.5.2 Kickoff tbmonitor[  $tbmonitor ]
          2.9.5.3 Bring the engine to quiescent mode
          2.9.5.3 Change the logging mode of the databases 
                  From the main menu
                  Goto Logical-Logs option
                  Goto databases option
                  Select the databases pdm and <userdb>
                  Select Inbuffered Logging, Mode Ansi
                  Exit        

3.0 Estimated Conversion Time

  The approximate time for the conversion depends on the size of the
  database. Plan your converion on the lean period of your design process.
  You need the following information to estimate your conversion time.

  Timings on a C100 chipset[ IP32C, IP220 ]
   y - Total number of catalogs in the database
   z - Number of rows in pdmparameters table

   T =   Time for conversion in seconds = (y * 1) + (z * 3) +  5% of this time for other data conversion

   D = Days needed to convert = T/86400 

  For example:
   50   - Total number of catalogs in the database
   5000   - Number of rows in pdmparameters table

  Total time in seconds =  (50 * 1) + (5000 * 3) = 15050 secs + (.05 * 15050) = 16275 secs

   Days = 16275/86400 = .15  ~ 25 minutes 

  Timings on a C300 chipset[ 6000, 6240, 2000 ]

   y - Total number of catalogs in the database
   z - Number of rows in pdmparameters table

   T =   Time for conversion in seconds = (y * 1) + (z * 2)   + 5% of this time for other data conversion

   D = Days needed to convert = T/86400 

  For example:
   50   - Total number of catalogs in the database
   5000   - Number of rows in pdmparameters table

  Total time in seconds =  (50 * 1) + (5000 * 2) + .05(T) = 10050 secs + (.05 * 10050) = 11025 secs

   Days = 11025/86400 = .12  days 


4.0 I/PDM Conversion
   
  Running the Converter

    4.1 Log into the administrator account [nfmadmin]

    4.2 key in /usr/ip32/pdm/bin/PDMcvt20 to invoke the converter

    The following menu is displayed.
                


                           I/PDM 2.0.x to 2.1.x CONVERTER

          Environment name           [2.0x_env                          ]
          Username                   [nfmadmin                          ]
          Password                   [                                  ]
          PDM/SQL Debug              [/dev/null                         ]
          MEM Debug                  [                                  ]









                    -----------------------------------

                    Control C - To Terminate Conversion now
                    PF1       - To Resume Conversion now
                    Backspace/Delete - To delete


    4.3 Enter the Environment Name, Username and Password for the database
        that you want to convert.

    4.4 Press the <PF1> key to accept the information.

   
     The following menu is displayed.



                                SELECTION MENU

          PDM System and catalog Tabl[n                                 ]
          Parametric tables          [n                                 ]
          Completion Check & Cleanup [n                                 ]











                    -----------------------------------

                    Control C - To Terminate Conversion now
                    PF1       - To Resume Conversion now
                    Backspace/Delete - To delete


    4.5 Key in y for the tables you want to convert.
        The tables must be converted in the order that they appear

    4.6 Press the <PF1> key to resume the conversion or <Ctrl> c to
        terminate the conversion.


     If there are any ems macros that will be used in I/PDM 2.1.x
     the macros must be edited.

5.0  Converting the macros

     All macro libraries must be edited before they can be used in a 2.1.x 
     database. A ppl script is provided in /usr/ip32/pdu/ppl/bin called 
     edit_macro. Make sure the macros are local to where ems is invoked.

     5.1 Enter ems
     5.2 On the ems command line enter edit_macro
     5.3 Enter the macro library name
     5.4 Enter each macro to be converted or "*" for all
     5.5 Choose the PDM button
     5.6 Checkin the edited macro libraries
