!include $(RISDEVDIR)\riscli\build\defines.nt

fast: version source bin
	@cd $(RISDEVDIR)\riscli\build

world: cleanworld version subdirs prototypes source bin
	@cd $(RISDEVDIR)\riscli\build

prototypes:
	@echo.
	@echo 	Making directory $(RISDEVDIR)\riscli\clicom
	@cd $(RISDEVDIR)\riscli\clicom
	@mk prototypes

	@echo.
	@echo 	Making directory $(RISDEVDIR)\riscli\client
	@cd $(RISDEVDIR)\riscli\client
	@mk prototypes

	@echo.
	@echo 	Making directory $(RISDEVDIR)\riscli\dict
	@cd $(RISDEVDIR)\riscli\dict
	@mk prototypes

	@echo.
	@echo 	Making directory $(RISDEVDIR)\riscli\file
	@cd $(RISDEVDIR)\riscli\file
	@mk prototypes

	@echo.
	@echo 	Making directory $(RISDEVDIR)\riscli\sql
	@cd $(RISDEVDIR)\riscli\sql
	@mk prototypes

	@echo.
	@echo 	Making directory $(RISDEVDIR)\riscli\trans
	@cd $(RISDEVDIR)\riscli\trans
	@mk prototypes

	@echo.
	@echo 	Making directory $(RISDEVDIR)\riscli\user
	@cd $(RISDEVDIR)\riscli\user
	@mk prototypes

	@echo.
	@echo 	Making directory $(RISDEVDIR)\riscli\upgrade
	@cd $(RISDEVDIR)\riscli\upgrade
	@mk prototypes

version:
	@echo.
	@echo Making $(RISDEVDIR)\riscom\internal\risver.h
	@cd $(RISDEVDIR)\riscom\build
	@makevers
	@cd $(RISDEVDIR)\risutl\build

subdirs:
	@echo.
	@echo 	Creating clicom subdirectories
	@-mkdir $(RISDEVDIR)\riscli\clicom\prt 2>NUL
	@-mkdir $(RISDEVDIR)\riscli\clicom\$(OBJDIR) 2>NUL

	@echo.
	@echo 	Creating client subdirectories
	@-mkdir $(RISDEVDIR)\riscli\client\prt 2>NUL
	@-mkdir $(RISDEVDIR)\riscli\client\$(OBJDIR) 2>NUL

	@echo.
	@echo 	Creating dict subdirectories
	@-mkdir $(RISDEVDIR)\riscli\dict\prt 2>NUL
	@-mkdir $(RISDEVDIR)\riscli\dict\$(OBJDIR) 2>NUL
	
	@echo.
	@echo 	Creating file subdirectories
	@-mkdir $(RISDEVDIR)\riscli\file\prt 2>NUL
	@-mkdir $(RISDEVDIR)\riscli\file\$(OBJDIR) 2>NUL
	
	@echo.
	@echo 	Creating sql subdirectories
	@-mkdir $(RISDEVDIR)\riscli\sql\prt 2>NUL
	@-mkdir $(RISDEVDIR)\riscli\sql\$(OBJDIR) 2>NUL
	
	@echo.
	@echo 	Creating trans subdirectories
	@-mkdir $(RISDEVDIR)\riscli\trans\prt 2>NUL
	@-mkdir $(RISDEVDIR)\riscli\trans\$(OBJDIR) 2>NUL
	
	@echo.
	@echo 	Creating user subdirectories
	@-mkdir $(RISDEVDIR)\riscli\user\prt 2>NUL
	@-mkdir $(RISDEVDIR)\riscli\user\$(OBJDIR) 2>NUL
	
	@echo.
	@echo 	Creating upgrade subdirectories
	@-mkdir $(RISDEVDIR)\riscli\upgrade\prt 2>NUL
	@-mkdir $(RISDEVDIR)\riscli\upgrade\$(OBJDIR) 2>NUL

	@echo.
	@echo 	Creating bin subdirectories
	@-mkdir $(RISDEVDIR)\riscli\bin\$(BINDIR) 2>NUL

	@echo.
	@echo 	Creating setup32 subdirectories
	@-mkdir $(RISDEVDIR)\riscli\setup32\bin 2>NUL
	@-mkdir $(RISDEVDIR)\riscli\setup32\bin\$(BINDIR) 2>NUL
	@-mkdir $(RISDEVDIR)\riscli\setup32\csource\$(OBJDIR) 2>NUL
	@-mkdir $(RISDEVDIR)\riscli\setup32\bldcui\$(OBJDIR) 2>NUL
	@-mkdir $(RISDEVDIR)\riscli\setup32\remove\$(OBJDIR) 2>NUL
	@-mkdir $(RISDEVDIR)\riscli\setup32\interop\$(OBJDIR) 2>NUL
	@-mkdir $(RISDEVDIR)\riscli\setup32\deliv 2>NUL
	@-mkdir $(RISDEVDIR)\riscli\setup32\compress 2>NUL

source:
	@echo.
	@echo 	Making directory $(RISDEVDIR)\riscli\clicom
	@cd $(RISDEVDIR)\riscli\clicom
	@mk

	@echo.
	@echo 	Making directory $(RISDEVDIR)\riscli\client
	@cd $(RISDEVDIR)\riscli\client
	@mk

	@echo.
	@echo 	Making directory $(RISDEVDIR)\riscli\dict
	@cd $(RISDEVDIR)\riscli\dict
	@mk

	@echo.
	@echo 	Making directory $(RISDEVDIR)\riscli\file
	@cd $(RISDEVDIR)\riscli\file
	@mk

	@echo.
	@echo 	Making directory $(RISDEVDIR)\riscli\sql
	@cd $(RISDEVDIR)\riscli\sql
	@mk

#	@echo.
#	@echo 	Making directory $(RISDEVDIR)\riscli\tools
#	@cd $(RISDEVDIR)\riscli\tools
#	@mk

	@echo.
	@echo 	Making directory $(RISDEVDIR)\riscli\trans
	@cd $(RISDEVDIR)\riscli\trans
	@mk

	@echo.
	@echo 	Making directory $(RISDEVDIR)\riscli\user
	@cd $(RISDEVDIR)\riscli\user
	@mk

	@echo.
	@echo 	Making directory $(RISDEVDIR)\riscli\upgrade
	@cd $(RISDEVDIR)\riscli\upgrade
	@mk

setup:
	@echo.
	@echo   Making directory $(RISDEVDIR)\riscli\setup32
	@cd $(RISDEVDIR)\riscli\setup32
	@mk
	@cd $(RISDEVDIR)\riscli\build

bin:
	@echo.
	@echo 	Making directory $(RISDEVDIR)\riscli\bin
	@cd $(RISDEVDIR)\riscli\bin
	@mk
local:
	@echo.
	@echo   Making directory $(RISDEVDIR)\riscli\setup32\local
	@cd $(RISDEVDIR)\riscli\setup32\local
	@mk
	@cd $(RISDEVDIR)\riscli\build

cleanworld: cleanobjdir cleanmakeout cleanbin cleansetup

cleanobjdir:
	@echo.
	@echo 	Cleaning object directories
	@-del/q $(RISDEVDIR)\riscli\clicom\$(OBJDIR)\* 2>NUL
	@-del/q $(RISDEVDIR)\riscli\client\$(OBJDIR)\* 2>NUL
	@-del/q $(RISDEVDIR)\riscli\dict\$(OBJDIR)\* 2>NUL
	@-del/q $(RISDEVDIR)\riscli\file\$(OBJDIR)\* 2>NUL
	@-del/q $(RISDEVDIR)\riscli\sql\$(OBJDIR)\* 2>NUL
	@-del/q $(RISDEVDIR)\riscli\trans\$(OBJDIR)\* 2>NUL
	@-del/q $(RISDEVDIR)\riscli\user\$(OBJDIR)\* 2>NUL
	@-del/q $(RISDEVDIR)\riscli\upgrade\$(OBJDIR)\* 2>NUL

cleanmakeout:
	@echo.
	@echo 	Cleaning makeout
	@-del/q $(RISDEVDIR)\riscli\clicom\makeout 2>NUL
	@-del/q $(RISDEVDIR)\riscli\client\makeout 2>NUL
	@-del/q $(RISDEVDIR)\riscli\dict\makeout 2>NUL
	@-del/q $(RISDEVDIR)\riscli\file\makeout 2>NUL
	@-del/q $(RISDEVDIR)\riscli\sql\makeout 2>NUL
	@-del/q $(RISDEVDIR)\riscli\trans\makeout 2>NUL
	@-del/q $(RISDEVDIR)\riscli\user\makeout 2>NUL
	@-del/q $(RISDEVDIR)\riscli\upgrade\makeout 2>NUL

cleanprototypes:
	@echo.
	@echo 	Cleaning prototypes
	@-del/q $(RISDEVDIR)\riscli\clicom\prt\* 2>NUL
	@-del/q $(RISDEVDIR)\riscli\client\prt\* 2>NUL
	@-del/q $(RISDEVDIR)\riscli\dict\prt\* 2>NUL
	@-del/q $(RISDEVDIR)\riscli\file\prt\* 2>NUL
	@-del/q $(RISDEVDIR)\riscli\sql\prt\* 2>NUL
	@-del/q $(RISDEVDIR)\riscli\trans\prt\* 2>NUL
	@-del/q $(RISDEVDIR)\riscli\user\prt\* 2>NUL
	@-del/q $(RISDEVDIR)\riscli\upgrade\prt\* 2>NUL

cleanbin:
	@echo.
	@echo 	Cleaning bin
	@-del/q $(RISDEVDIR)\riscli\bin\$(BINDIR)\* 2>NUL

cleansetup:
	@echo.
	@echo   Cleaning $(RISDEVDIR)\riscli\setup32
	@cd $(RISDEVDIR)\riscli\setup32
	@mk cleanobjs
	@mk cleanbin
	@cd $(RISDEVDIR)\riscli\build

backuplist backlist:
	@bckup.bat -l

backupzip backzip:
	@bckup.bat -z

backuptree backtree:
	@bckup.bat -t
