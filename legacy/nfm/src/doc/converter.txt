                  RUNNING I/NFM 2.x to 3.1 CONVERTER

WARNING!!!
PLEASE BACKUP YOU DATABASE IN SOME WAY BEFORE ATTEMPTING TO RUN THE
CONVERTER.  YOU CAN DO A DBEXPORT OR RIS UNLOAD OF THE DATABASE.

WARNING!!!
YOU MUST UPGRADE YOUR RIS SOFTWARE AND RUN THE RIS UPGRADE UTILITY 
BEFORE RUNNING THE I/NFM CONVERTER!

WARNING!!!
WHEN CONVERTING CATALOGS, Nfmconvert CREATES A COPY OF A TEMPORARY DUMP 
FILE. YOU MUST SPECIFY WHERE THIS FILE IS TO BE CREATED. PLEASE INSERT 
THE FOLLOWING LINE INTO YOUR .profile:

	TMPDIR=/usrx/tmp

WHERE '/usrx/tmp' HAS THE MOST FREE DISK SPACE.

NOTE:  The converter will print step-by-step statuses to the screen.
       It might be helpful activate the Log File through the General
       Terminal Set Up.

1.  Type /usr/ip32/nfm/bin/Nfmconvert at the dollar prompt.

NOTE:  The converter can also be run with command line options.
       These options are:

       -e   <environment name>
       -u   <username>
       -p   <password>
       -d   <debug output file or device>  default is /dev/console
       -a   <nfmactivity table convert ('y' or 'n')> default is 'n' 
Example:

/usr/ip32/nfm/bin/Nfmconvert -e lajoyce -u nfmadmin -p nfmadmin -d /dev/ttn01
                             -a y

2.  Once you are within the converter, you will see the following menus:

        MENU #1             I/NFM 3.x CONVERTER

                           Environment name     [                ]
                           Username             [nfmadmin        ]
                           Password             [                ]
                           NFM/SQL DEBUG        [/dev/console    ]
                           Convert Nfmactivity  [n               ]
                           MEM DEBUG            [                ]

         --------------------------------------------------------

                Control C       - To Terminate Conversion now
                PF1             - To Resume Conversion now
                Backspace/Delete - To Delete

    The environment name, username, and password options are required
    to make the database connection.  Please type these in every time
    the conversion process is begun.

    Once menu 1 is filled in properly press PF1 and MENU #2 will appear.

        MENU #2               SELECTION MENU

                           NFM System Tables          [n       ]
                           Catalogs                   [n       ]
                           Workflow                   [n       ]
                           Search/Sort Criteria       [n       ]
                           Programs/Processes         [n       ]
                           Complete Check and Cleanup [n       ]

         ---------------------------------------------------------

          Control C          - To Terminate Conversion now
          PF1                - To Resume Conversion now
          Backspace/Delete   - To Delete


    NFM System Tables must be done before any other conversions can take
    place.  We advise that the converter be run as follows:  1) Run the
    NFM System Tables first, 2) run only the catalog tables after the
    system tables are successfully converted, 3) the Workflow, Search/Sort
    Criteria, and Programs/Processes can be run together, and 4) the
    Completion Check and Cleanup should be run after ALL the other
    conversion processes have successfully been completed.

    When you enter 'y' for NFM System Tables convertion, the next two
    menus will be displayed.  Both menus are used in converting the
    nfmattributes table and will not be displayed again after the system
    table convertion.  The first menu will display all user defined
    attributes that have the word 'date' in the attribute name.  If all
    the attributes listed are to be converted using the timestamp data
    type select the PF4, otherwise select each one to be converted and
    press PF1.


   <Enter> to Select ; <PF1> to Accept ; <PF4> to Accept All; <PF3> to Cancel

       n_fiche_date      n_rev_date
       n_ret_date        n_signout_date


    MENU #3:

    MENU #3            Additional Date Attributes (up to 48)
    <PF1> to Accept Form; <PF4> to Delete entry; <PF3> to Restart Form

                   [                               ]

    The second menu is used if there are any additional user defined
    attributes to be converted as a date that do not have the word
    'date' as part of the attribute name, it should be entered here.
    You are allowed to enter up to 48 attributes.

NOTE:  The attributes you key in will be converted for each catalog that
       contains that attribute name.  Be careful.  If you have an
       attribute that is a date data type in one catalog and another data
       type (like character or integer) in another catalog, and you
       specifiy that attribute on menu 3, all references to that attribute
       in ALL catalogs will be converted to a timestamp data type.

    The second item in the menu is the Catalog/Item conversion.  When you
    select this option you will receive a fourth menu in order to decide
    which catalogs you wish to convert:

    MENU #4
    <Enter> to Select; <PF1> to Accept; <PF4> to Accept all; <PF3> to Cancel

           bzamz1                 gemini_structure           d23test
           sixteencharcatal       bobbie                     d23test_rl
           ronbebus               dmandstest                 legends
           jackharvey             lajoyce                    legends_rl


    NOTE:  Any problems encountered while inserting data into tables 
           during the catalog conversion will be logged into a file 
           called CVTbad_in.ris. After a few modifications, this file 
           will be in a format suitable for input to RIS. Please check
           for the existance of this file after the conversion.

    If you do not wish to convert all the catalogs at once, you should
    highlight the catalog you wish to convert using the arrow keys and
    press <enter> key to select it.  Once all the selections have been
    made press <PF1> key to begin the catalog conversion.

    The last four options are Workflow, Search/Sort Criteria, Programs/
    Processes and Completion Check and Cleanup.

    During the search and sort criteria conversion, a log file is main-
    tained. The file will be in the local directory and named CVTreports.log.
    This file will record each original search/sort string and the resulting 
    converted search/sort string. The file should be examined after conversion
    to make sure that the resulting search strings have been converted 
    correctly.

    During the process on transition conversion, a log file is main-
    tained. The file will be in the local directory and named CVTprocess.log.
    This file will record each original program file name and the new
    program file name.

    NOTE:  Do NOT perform the final cleanup if any search/sort or process
           on transition has not been converted successfully. The old 
           report files and processes are kept in the old 'reports' 
           directory under the environment directory. This directory is
           removed during cleanup.
‚
    The Completion Check and Cleanup option must be run before you will be
    able to log into I/NFM 3.x.  When you select this option you will
    receive a fifth menu on what items you want to remove:

         MENU #5            Selection Menu

                           Remove old tables            [n]
                           Remove scripts and dmp files [n]
                           Remove reports directory     [n]


     --------------------------------------------------------------

         Control C  - To Terminate Conversion now
         PF1        - To Resume Conversion now
         Backspace/Delete - To Delete

   After you select the <PF1> key a confirmation prompt will appear:

          <Are you sure you want to do the cleanup ?>

   Enter 'y' to continue or 'n' to stop the cleanup.

NOTE:  There is a nfmconvertlog table that is created at the beginning of
       the conversion process.  It's status is updated every time a process
       is initiated.  There are nine different status flags that will occur
       in updating the nfmconvertlog.  The attributes in this table are as
       followed:

          n_tablename           char(20)
          n_cvtstatus           char(1)
          n_date                timestamp
          n_lastrowdone         integer

          If n_cvtstatus = B, The convert on this table is beginning.
          If n_cvtstatus = E, An error or interrupt occurred.
          If n_cvtstatus = U, The old table is unloaded.
          If n_cvtstatus = D, The old table has been dropped.
          If n_cvtstatus = R, The old table has been renamed in the dump file.
          If n_cvtstatus = T, The old table is loaded.
          If n_cvtstatus = N, The new table is created from the template.
          If n_cvtstatus = M, The new table has been loaded with data from
                              the old table.
          If n_cvtstatus = C, The table has been converted successfully.
          If n_cvtstatus = I, An error occurred creating an index.
          If n_cvtstatus = A, An error occurred resolving file attributes.
          If n_cvtstatus = K, An error occured dropping old catalogs or 
                              f_catalogs.
          If n_cvtstatus = Y, There are entries in the CVTbad_in.ris 
							  file.
          If n_cvtstatus = P, Entries in the CVTbad_in.ris file have
							  been inserted.

   After the NFM System Tables have been converted successfully, the
   nfmconvertlog table will be updated with a tablename of CVTSTATUS1
   and n_cvtstatus will be status of "C".

         Catalogs           -> CVTSTATUS2 -> C
         Workflow           -> CVTSTATUS3 -> C
         Search/Sort        -> CVTSTATUS4 -> C
         Programs/Processes -> CVTSTATUS5 -> C

   You will not be able to log in to I/NFM 3.x until all of these statuses
   are successful.


WARNINGS:

   Please use Control C ONLY in case of an emergency! This makes it more 
   difficult for the converter to resume where it left off.

   Be sure to check for the CVTbad_in.ris file indicating insert failures,
   the CVTreports.log file describing search/sort criteria modifications, 
   and the CVTprocess.log file with process on transition logging.
