I/NFM Administrator Utility

The Administrator Utility that is provided with I/NFM is used
outside of  either user interface and lets the administrator manage
aspects of the  system that frequently require change. This utility
can only be run from the I/NFM server machine and operates identically
to the alphanumeric  interface to I/NFM. The commands provided
in this utility are explained below.

1.  To access the administrator utility, from your nfm administrator
    account, key in the following:

    /usr/ip32/nfm/bin/Nfmadmin

    The Login to I/NFM form appears.

    Type in the I/NFM Administrator login and password and the name 
    of the I/NFM environment to be changed.  Then select the <PF1>
    key to accept the information.

    The Utility menu appears at the top of the screen.

2.  The options on the Utility menu are:

    Configure
    Report
    Maintain
    Environment
    Repair

3.  Use the arrow keys to highlight an option, then press <Return>
    to accept it.

4.  The Configuration options are:

    a.  Change NFM Environment File -- This option lets you change 
        the information that is encrypted and stored in the nfme_*
        environment file located in the /usr/lib/nodes/owned
        directory.  This option will let a user continue running
        I/NFM after the unix nfm administrator account password or
        the RIS schema password have been changed.  When this option
        is selected, a list of environments on the server is
        displayed.  Select the environment that you want to change
        and the current contents of that file are display.  You can
        modify whatever values necessary.

        When you finish changing the information, select the <PF1> 
        key to write the new environment file and return to the
        configuration menu. If you want to exit the form without
        changing the file, select the <PF3> key and return to the
        configuration menu. 

    b.  Create a Server Files -- This option lets you create a new
        I/NFM server nfms_* file. When this option is selected, you
        are prompted to input a server name and to indicate whether
        the TCP/IP network protocol is used on this server machine.

        When you have finished, select the <PF1> key to write the
        new server file information and return to the configuration
        menu.  If you want to exit the form without accepting the
        changes, select the <PF3> key and return to the
        configuration menu. 

    c.  Create a Combined-Client File --  This option lets you
        create a new I/NFM combined-client server nfmc_* file.  When
        this option is selected, you are prompted to input a server
        name and to indicate whether the TCP/IP network protocol is
        used on this server machine. 

        When you have finished, select the <PF1> key to write the
        new server file information and return to the configuration
        menu.  If you want to exit the form without accepting the
        changes, select the <PF3> key and return to the
        configuration menu. 

    d.  Configure Item Locking for Copy File -- This option lets you
        copy files even when the item is locked.  When you select
        this option, the system prompts you to indicate if you would
        like to copy the item file while the item is locked. Key in
        either Y (yes) or N (no).

        When you have finished, select the <PF1> key to accept your 
        changes and return to the configuration menu. If you want to
        exit the form without making changes, select the <PF3> key
        and return to the configuration menu.

        NOTE:

        The CopyLock command is meant to be a per site configuration
        option. The configuration value is maintained in the I/NFM
        system catalog. When an item is locked, the n_itemlock attri-
        bute for the item is set based on the copylock configuration.
        It is set to "Y" if copylock has not been configured or "C"
        if copylock is configured to allow item files to be copied 
        while the item is locked. When a "Copy Item File" command is 
        attempted, the n_itemlock value is checked. If the value is 
        "Y", the command is not allowed. If the value is "C" or "N" 
        (not locked at all) and the user has privilege to copy the 
        item files, the command will be executed.

        The above explanation implies that if the copylocks value is
        configured while some items are locked, these items' files will
        not be copied until the items are unlocked. If the items are
        then relocked, copy will be allowed.
        
    e.  Load Process for Processes on Transitions -- This option
        lets you load a process to be attached to a transition,
        which will be invoked when the transition occurs.  Before a
        process can be attached to a transition, the process must be
        loaded into I/NFM.  When you select this option, the system
        prompts you to input information for the Storage Name,
        Program Name, Program Description, and File Name.

        When you have finished, select the <PF1> key to accept your 
        changes and return to the configuration menu. If you want to
        exit the form without making changes, select the <PF3> key
        and return to the configuration menu.

    f.  Associate a Process with a Transition -- After a process has
        been loaded into I/NFM, it can be attached to a transition
        using this utility.  When you select this option, the system
        prompts you to choose the workflow that this process will be
        associated with. When you have selected a workflow, the
        system will prompt you to select the process that you wish
        to attach to a transition.  You will then be displayed a
        list of all possible transitions available with the
        workflow.  Select a transition.  

        When you have finished, select the <PF1> key to accept your
        changes and return to the configuration menu. If you want to
        exit the form without making changes, select the <PF3> key
        and return to the configuration menu.

    g.  Display Loaded Processes -- This command will display a
        listing of all processes that have been loaded into I/NFM. 
        Also in the display is the transition to which the process
        is attached.  When you have finished, select the <PF3> key
        to remove the listing and return to the configuration menu.

    h.  Date Format -- This option lets you modify the display form 
        of dates and print listings through I/NFM.  When you select
        this option, the system displays the current date format,
        and prompts you to indicate whether or not you want to
        change that format. If you select to change the format, the
        system displays a list of possible formats to change to. 
        Select the new format. 

        When you have finished, select the <PF1> key to accept your 
        changes and return to the configuration menu. If you want to
        exit the form without making changes, select the <PF3> key
        and return to the configuration menu.

    i.  Time Format -- This option lets you modify the display form 
        of times and print listings through I/NFM. When you select
        this option, the system displays the current time format,
        and prompts you to indicate whether or not you want to
        change that format.  If you select to change the format, the
        system displays a list of possible formats to change to. 
        Select the new format. 

        When you have finished, select the <PF1> key to accept your 
        changes and return to the configuration menu. If you want to
        exit the form without making changes, select the <PF3> key
        and return to the configuration menu.

5.  The Reports options are:

    a.  Validate Usability of Storage Areas -- This option lets you
        validate hard disk storage areas within I/NFM.  When you
        select this option, the system prompts you to select an
        individual storage area for validation or to select all
        storage areas. To select individual storage areas, use the
        arrow keys to highlight the storage areas you want to
        validate,and press the <Enter> key to select your choice. 
        After all choices have been selected, press the <PF1> key to
        accept your selections and return to the reports menu.  If
        you want to select all storage areas, press the <PF4> key
        and return to the main menu.  If you want to exit the form
        without accepting any storage areas, select the <PF3> key
        and return to the reports menu. 

    b.  Create Cross Reference File Listing -- This option lets you 
        create a cross reference of your local file names with the
        internal storage file name that I/NFM generated during the
        check-in process.  When you select this option, I/NFM
        processes your request on all catalogs and displays a list
        of files on the screen. 

6.  The Maintenance utility options are:

    a.  Delete Extraneous NFMserver Process -- This option lets you 
        delete any processes that have been left running on the
        server machine.

    b.  Purge Nfmactivity Table -- This option lets you purge
        entries from the nfmactivity table.  With this option you
        can purge all entries before a specified date or only
        certain entries on a specified day.  When you select this
        option, the system displays the date and time of the first
        entry in the nfmactivity table and prompts you to input the
        date that you would like to purge before.  To purge all
        entries of certain day, type in the date of the next day and
        accept the form.  To purge entries for one day, input the
        date and time of the entry following the last one you wish
        to purge. 

        When you have finished, select the <PF1> key to accept your
        choice and return the the configuration menu when the purge
        is complete.  If you want to exit the form without making a
        choice, select the <PF3> key and return to the Maintenance
        Menu. 

    c.  Delete Operation Environment -- This option lets you delete
        an operating environment. When you  select this option, the
        system will prompt you with the choices of operating
        environment to delete.  Select the operating environment to
        be deleted.  Deleting an operating environment will remove
        the nfme_* and nfms_* files from your /usr/lib/nodes/owned
        directory, remove the environment directory for the nfm
        administrator login, remove all tables with the I/NFM
        database, and remove entries within the risschema file
        pertaining the that environment.  

        When you have finished, select the <PF1> key to accept your
        choice and return the the configuration menu when the delete
        is complete.  If you want to exit the form without making a
        choice, select the <PF3> key and return to the Maintenance
        Menu. 

    d.  Purge RIS Log File -- This option lets you purge all entries
        from the ris.log file, located in the nfm administrator's
        default directory, or the directory  where the I/NFM product
        was initialized. 

        When you select this command, the system will prompt you
        with a message to press <PF1> to remove the entries from the
        ris.log file or press <PF3> to cancel the request.

    e.  Turn On Debug -- This option lets you turn debug on or off
        while running any of the utilities. 

7.  An 'nfmadmin' account is required on all nodes utilizing the
    import/export capabilities.  This includes those nodes running
    the combined client/server images.  In the case of the combined
    client/server nodes, a nfmc_<combined client/server> file must
    exist in the clearinghouse in order to be accessed for
    import/export.  This file can be generated and broadcast using
    the 'Nfmadmin' utility.  The environment options are:

    a.  Import Environment -- An environment can only be imported
        from the server node on which it was initialized.  The
        environment directory and sub-directories will be created in
        the /usrx/nfmadmin directory.

        When you select this command, the system will prompt you for
        the password of your node's nfm administrator account.  Type
        in the password and accept the form.  The system will then
        prompt you with a listing of the possible environments to
        copy to your system.  Select an environment from the list. 
        When you have finished, select the <PF1> key to accept your
        choices and return to the Environment menu when the copy is
        complete.  If you want to exit the form without making a
        choice, select the <PF3> key and return to the Environment
        Menu. 

    b.  Export Environment -- Only environments that are initialized
        on the local node or those that have been imported from
        another node may be exported.  These environment will have
        associated nfme_<env> files in the /usr/lib/nodes/local and
        /usr/lib/nodes/owned clearinghouse directories.

    When you select this command, the system will prompt you with 
    a list of environment on your node to copy.  Select an
    environment from the list and accept the form.  You will then be
    prompted with a listing of valid I/NFM servers to copy the
    environment file to.  Select the server and accept the form. 
    The next prompt will be a prompt for the password to the nfm
    administrator account on the remove server.  Type in the
    password and accept the form. 

    When you have finished, select the <PF1> key to accept your 
    choices and return to the Environment menu when the copy is
    complete.  If you want to exit the form without making a choice,
    select the <PF3> key and return to the Environment Menu.  

8.  The Repair options are:

    a.  Delete Invalid Entries in nfmindex Table -- When you select 
        this command, the system will prompt you with a message to
        press <PF1> to remove the entries from the nfmindex table.

        If you want to exit the form without making a choice, select
        the <PF3> key and return to the Repair Menu.

    b.  Repair TI/TO File Status -- This option lets you repair any 
        item that has been left in a temporary state following a
        fatal check-out or check-in error.  This utility searches
        for all items in the database that indicate a bad state, and
        lets you change any or all of those items.

9.  The LOGOUT option lets you exit the Administrator Utility. 
