echo Creating makefiles
echo
grmakemake -i $PDU/include/sol2_igno -D __Sol2__ stub.m stubmake
grmakemake -i $PDU/include/sol2_igno -D __Sol2__ frmstub.m frmstubmake
grmakemake -i $PDU/include/sol2_igno -D __Sol2__ -DRISV$RISVER pdmapi.m makefile

echo Removing .o files
echo
rm *.o

echo Removing libraries
echo
rm $PDM/lib/$TARG/PDMapi.a
rm $PDM/lib/$TARG/PDMapilib.a
rm $PDM/lib/$TARG/PDUapilib.a
rm $PDM/lib/$TARG/PDMstub.o

echo Calling genpduapi
echo
$PDU/pdubuild/genpduapi.sh

echo Calling genpdmapi
echo
$PDU/pdubuild/genpdmapi.sh

grmake
grmake -f stubmake
grmake -f frmstubmake
grmake -f sol2make
rm api_driver

echo Creating shared objects for patch directory
ld -z text -G -o PMfile_mem.so PMfile_mem.o
ld -z text -G -o PMwrite_buf.so PMwrite_buf.o
ld -z text -G -o PMread_buf.so PMread_buf.o

echo
echo moving shared objects to patch directory
echo
mv PMfile_mem.so $PDU/config/dload/patch
mv PMwrite_buf.so $PDU/config/dload/patch
mv PMread_buf.so $PDU/config/dload/patch
