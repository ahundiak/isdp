DIRLIST="ass bom cicocp fmgr init macros mulfile pdmp pdms reports ris tools"

for dir in $DIRLIST
do
   cd $PDM/$dir
   if [ "$REMOVEOBJ" = "y" ]
   then
     echo "Removing .o for $dir"
     rm *.o
   fi
   if [ "$dir" = "ris" ]; then
      echo "Detour for $dir"
      rm *.c
      make -f rissgimake
   fi


   rm makefile
   echo "Creating makefile for $dir"
   $GRNUC/bin/grmakemake -i $PDU/include/sgi_igno -D __sgi -DRISV$RISVER $dir.m
   echo "Making $dir..."
   $GRNUC/bin/grmake
done

echo
echo "Making pdmapi/src dir"
echo
cd $PDM/pdmapi/src
rm -f makefile *.o
rm stubmake
rm frmstubmake
echo "Creating makefile for pdmapi/src"
   $GRNUC/bin/grmakemake -i $PDU/include/sgi_igno -D __sgi stub.m stubmake
   $GRNUC/bin/grmakemake -i $PDU/include/sgi_igno -D __sgi pdmapi.m makefile
   $GRNUC/bin/grmakemake -i $PDU/include/sgi_igno -D __sgi frmstub.m frmstubmake
   echo "Making pdmapi/src..."
   $GRNUC/bin/grmake
   $GRNUC/bin/grmake -f stubmake
   $GRNUC/bin/grmake -f frmstubmake

echo
echo "Making gethost.o in $PDM/tli"
cd $PDM/tli
rm gethost.o
make -f sgimake gethost.o

echo "Make completed"
