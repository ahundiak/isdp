#This script calls copy_out_wad which will copy all source out of icom for
#the paraticular products. This will delete the source that already exists
#in the directory copying to, so be sure all changes are checked in first.
#
#   $1 = Node to send cpio file back to.
#   $2 = PDM login of users workstation to send cpio file back to.
#   $3 = PDU login of users workstation to send cpio file back to.
#   $4 = PDMNORM login of users workstation to send cpio file back to.
#   $5 = Login on pdmdel where source tree will be copied out to.

#Set Login Variables to what user passed from calling script
PDMLOGIN=$2
PDULOGIN=$3
NORMLOGIN=$4

echo "PDMLOGIN=$PDMLOGIN"
echo "PDULOGIN=$PDULOGIN"
echo "NORMLOGIN=$NORMLOGIN"

ICOM=$5
echo "The pdmdel directory you have chosen is $ICOM."
nodename=$1
echo "nodename=$nodename"

echo "Entering copy_all_src"
echo ""

if [ "$PDULOGIN" != "NULL" ]
then
echo
echo "RETRIEVING PDU SOURCE FROM ICOM..."
echo
rm $ICOM
mkdir $ICOM
echo "Running the copy_out_wad on pdu24"
echo ""
/usr/icom/./copy_out_wad $ICOM pdu24 pdu24.cpio $nodename.$PDULOGIN
echo "Finished copy_out_wad on pdu24"
echo ""
fi

if [ "$PDMLOGIN" != "NULL" ]
then
echo
echo "RETRIEVING PDM SOURCE FROM ICOM..."
echo
rm $ICOM
mkdir $ICOM
echo "Running the copy_out_wad on pdm24"
echo ""
/usr/icom/./copy_out_wad $ICOM pdm24 pdm24.cpio $nodename.$PDMLOGIN
echo "Finished copy_out_wad on pdm24"
echo ""
fi

if [ "$NORMLOGIN" != "NULL" ]
then
echo
echo "RETRIEVING PDMNORM SOURCE FROM ICOM..."
echo
rm $ICOM
mkdir $ICOM
echo " Running copy_out_wad on pdmnorm24"
echo ""
/usr/icom/./copy_out_wad $ICOM pdmnorm24 pdmnorm24.cpio $nodename.$NORMLOGIN
echo "Finished copy_out_wad on pdmnorm24"
fi
echo "Copy source for PDU, PDM and PDMNORM complete"
