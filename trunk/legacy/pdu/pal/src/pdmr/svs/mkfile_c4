IPATH =  \
        -I$(PDU)/include \
        -I$(PDM)/include \
        -I$(EXNUC)/include \
        -I$(GRNUC)/include \
        -I$(NFM)/include \
        -I$(DBA)/include

CC = acc

CFLAGS = -g

COPT = -ansi -O3 -Atarg=c400

OBJECTS : svs.o svswrk.o condy.o condl.o viewy.o viewl.o 

svswrk.o : svswrk.c
	acc $(COPT) $(IPATH) -c svswrk.c

svs.o : svs.c
	acc -c $(COPT) svs.c

condy.o : condy.y
	yacc -dvlt condy.y
	mv y.tab.h condy.h
	sed -e 's/yy/c_yy/g' y.tab.c > out
	sed -e '1 i\
#include "header.h"' out > condy.c
	rm out
	acc -c $(COPT) condy.c

viewy.o : viewy.y
	yacc -dvlt viewy.y
	mv y.tab.h viewy.h
	sed -e 's/yy/v_yy/g' y.tab.c > out
	sed -e '1 i\
#include "header.h"' out > viewy.c
	rm out
	acc -c $(COPT) viewy.c

condl.o : condl.l
	lex -v condl.l
	sed -e '1 i\
#include "condy.h"' lex.yy.c > out
	sed -f csedcom out > condl.c	
	rm out
	acc -c $(COPT) condl.c

viewl.o : viewl.l
	lex -v viewl.l
	sed -e '1 i\
#include "viewy.h"' lex.yy.c > out
	sed -f vsedcom out > viewl.c	
	rm out
	acc -c $(COPT) viewl.c
