#
#  Targets must be built in
#  the following order:
#

all:\
	target_directories \
	_TOOLS \
	_SYMTAB \
	_OMCPP \
	_OPP

#	_DDP

target_directories:
	@if not exist $(TARGET)\om\opp\tools mkdir $(TARGET)\om\opp\tools
	@if not exist $(TARGET)\om\opp\symtab mkdir $(TARGET)\om\opp\symtab
	@if not exist $(TARGET)\om\opp\cpp mkdir $(TARGET)\om\opp\cpp
	@if not exist $(TARGET)\om\opp\opp mkdir $(TARGET)\om\opp\opp
	@if not exist $(TARGET)\om\opp\ddp mkdir $(TARGET)\om\opp\ddp

_TOOLS: $(TARGET)\om\opp\tools\makefile
	@$(ECHO) "\\n\\tMaking tools ..."
	@cd $(TARGET)\om\opp\tools
	@cd
	@$(MAKE)

$(TARGET)\om\opp\tools\makefile: $(EXNUC)\om\opp\tools\tools.m
	cd $(EXNUC)\om\opp\tools
	$(MAKEMAKE) tools.m $(TARGET)\om\opp\tools\makefile

_SYMTAB: $(TARGET)\om\opp\symtab\makefile
	@$(ECHO) "\\n\\tMaking symtab ..."
	@cd $(TARGET)\om\opp\symtab
	@cd
	@$(MAKE)

$(TARGET)\om\opp\symtab\makefile: $(EXNUC)\om\opp\symtab\symtab.m
	cd $(EXNUC)\om\opp\symtab
	$(MAKEMAKE) symtab.m $(TARGET)\om\opp\symtab\makefile

_OMCPP: $(TARGET)\om\opp\cpp\makefile
	@$(ECHO) "\\n\\tMaking cpp ..."
	@cd $(TARGET)\om\opp\cpp
	@cd
	@$(MAKE)

$(TARGET)\om\opp\cpp\makefile: $(EXNUC)\om\opp\cpp\cpp.m
	cd $(EXNUC)\om\opp\cpp
	$(MAKEMAKE) cpp.m $(TARGET)\om\opp\cpp\makefile

_OPP: $(TARGET)\om\opp\opp\makefile
	@$(ECHO) "\\n\\tMaking opp ..."
	@cd $(TARGET)\om\opp\opp
	@cd
	@$(MAKE)

#
#	The include files listed below are generated files.  Until we have
#	a yacc on columbus, they are just copies of the files that were
#	generated on clipper.
#

$(TARGET)\om\opp\opp\makefile: \
	$(EXNUC)\om\opp\opp\opp.m \
	$(TARGET)\om\opp\opp\kpster.h \
	$(TARGET)\om\opp\opp\kptype.h \
	$(TARGET)\om\opp\opp\y.tab.h
	cd $(EXNUC)\om\opp\opp
	$(MAKEMAKE) opp.m $(TARGET)\om\opp\opp\makefile

$(TARGET)\om\opp\opp\kpster.h: $(EXNUC)\om\opp\opp\ntkpster.h
	-rm $(TARGET)\om\opp\opp\kpster.h
	copy $(EXNUC)\om\opp\opp\ntkpster.h $(TARGET)\om\opp\opp\kpster.h

$(TARGET)\om\opp\opp\kptype.h: $(EXNUC)\om\opp\opp\ntkptype.h
	-rm $(TARGET)\om\opp\opp\kptype.h
	copy $(EXNUC)\om\opp\opp\ntkptype.h $(TARGET)\om\opp\opp\kptype.h

$(TARGET)\om\opp\opp\y.tab.h: $(EXNUC)\om\opp\opp\nty.tab.h
	-rm $(TARGET)\om\opp\opp\y.tab.h
	copy $(EXNUC)\om\opp\opp\nty.tab.h $(TARGET)\om\opp\opp\y.tab.h

_DDP: $(TARGET)\om\opp\ddp\makefile
	@$(ECHO) "\\n\\tMaking ddp ..."
	@cd $(TARGET)\om\opp\ddp
	@cd
	@$(MAKE)

$(TARGET)\om\opp\ddp\makefile: $(EXNUC)\om\opp\ddp\ddp.m
	cd $(EXNUC)\om\opp\ddp
	$(MAKEMAKE) ddp.m $(TARGET)\om\opp\ddp\makefile
