.SUFFIXES:  .l .y .C
YFLAGS = -d

PackageTag = VDyydrw

VDdrwgrammar.C : VDdrwgrammar.y

.y.C:
	@echo "\t$< -> y.tab.c <yacc>"
	@yacc30 $(YFLAGS) $*.y
	@echo "\ty.tab.c -> $*.C <sed>"
	@sed "s/yy/$(PackageTag)/g" y.tab.c | sed "s/YY/$(PackageTag)/g" > $*.C
	@echo "\ty.tab.h -> $*.h <sed>"
	@sed "s/yy/$(PackageTag)/g" y.tab.h | sed "s/YY/$(PackageTag)/g" > $*.h
	echo "}" >> $*.C # Terminate additional "{" put to yyparse()
	@rm y.tab.c y.tab.h
