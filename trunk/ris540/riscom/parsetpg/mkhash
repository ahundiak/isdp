# Do not alter this SPC information: $Revision: 1.1.54.1 $
ALPHA=71
TABLE_SIZE=405

TEMP_FILE="/usr/tmp/hashtab.tmp"
TARGET_FILE="$RISDEVDIR/riscom/internal/hashtab.h"
KEYWORDS_FILE="keywords"
#
#	Note:	If this script fails, APLHA & TABLE_SIZE may need to be changed.
#			Run hashsize to find proper values for these variables.

echo "Calling mkhshtb with \$ALPHA=$ALPHA and \$TABLE_SIZE=$TABLE_SIZE"
mkhshtb -a $ALPHA -t $TABLE_SIZE -p < $KEYWORDS_FILE > $TEMP_FILE
if [ $? != 0 ]; then
	echo
	echo "\tThe current values of ALPHA($ALPHA) & TABLE_SIZE($TABLE_SIZE) are invalid.  Choose"
	echo "\tnew values from the output of \"hashsize\".  Select the ALPHA with"
	echo "\tthe largest TABLE_SIZE with no collsions. Once new values are selected,"
	echo "\tmodify \"mkhash\" and \"parlex.c\" to use the new values."
	echo
	echo "Running hashsize"
	$RISDEVDIR/riscom/parsetpg/hashsize
	exit 1
fi
cmp -s $TEMP_FILE $TARGET_FILE
if [ $? != 0 ]; then
	echo "Creating new $TARGET_FILE"
	mv $TEMP_FILE $TARGET_FILE
else
	echo "$TARGET_FILE is up to date"
	rm $TEMP_FILE
fi
exit 0
