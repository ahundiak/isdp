# Master env file for isdp development

export ISDP_SOURCE=$HOME/isdp
export ISDP_TARGET=$HOME/target
export ISDP_INSTALL=$HOME/install
export ISDP_LEGACY=$HOME/legacy

# /opt/ingr needs to be symbolicallly linked to ISDP_LEGACY
# /usr/ip32 needs to be linked to ISDP_LEGACY as well
# Manually link for now
export ISDP_OPT_INGR=/opt/ingr

# This is hardcoded into some of the build scripts
export INGRHOME=/opt/ingr

# Try to limit paths to these two directories
export PATH=$PATH:$ISDP_INSTALL/bin
export LD_LIBRARY_PATH=$ISDP_INSTALL/lib

# C and Linking flags
export ISDP_C_CC="cc"
export ISDP_C_EXEC="-L /opt/ingr/lib -R /opt/ingr/lib"
export ISDP_C_FLAGS="-xCC -Xa -g -Kpic -features=no%conststrings"

ISDP_C_DEFINES="-DRUN_X -DX11 -DLITTLE_ENDIAN -DSYSV -DSYS5 -DSVR4 -DSUNOS -DSUNOS5 -DSUNOS58"
ISDP_C_DEFINES="$ISDP_C_DEFINES -Di386 -D__i386 -D__i386__ -DINTEL -DUNIX"
ISDP_C_DEFINES="$ISDP_C_DEFINES -D__BUILTIN_VA_ARG_INCR -D__EXTENSIONS__=1"

export ISDP_C_DEFINES

export ISDP_SHAREDLIB_FLAGS="-G -norunpath"

# grmake
# /usr/ccs/bin/make CC="${COMPILER} ${DECOMPOPT}" COPT="-g" DOPT="${MKDOPT}" OPPOPT="-l" OMCPPOPT="-l" DEBUG="yes" $*
export COMPILER=$ISDP_C_CC
export COMPOPT=$ISDP_C_FLAGS
export MKDOPT=$ISDP_C_DEFINES

# grmakemake
# ${EXTARG}/bin/makemake ${MKMKOPT} $*
export MKMKOPT="$ISDP_C_DEFINES $ISDP_SOURCE/grnuc/integ/Isl.mkmk"

# makemake
# nothing

# generated makefile
# $(CC) $(COPT) $(IPATH) $(IPATH1) $(IPATH2) $(MOPT) $(DOPT) $(DOPT1) $(DOPT2) -c $(SRC)/$(@:.o=.c)
#
# COPT in this context is gnerated by mkmk from COPT section
# However the generated makefile has for removing .c files
# if [ "$(COPT)" != "-g" -a "$(DEBUG)" != "yes" ];
#
# IPATH generated by mkmk from INCLUDE section
# MOPT = -Dsun=1 -D__sun__=1 -Di386=1 -D__i386=1 -D__i386__=1
# DOPT gets pulled from MKDOPT by grmake
# SRC generated from mkmk
# The comand line CC from grmake combines COMPILER and COMPOPT
#