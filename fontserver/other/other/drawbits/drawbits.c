#include <tools.h>

#define BX 56
#define BY 56
#define NX 10
#define NY 10

char bitmap[] = {
			-1, -1, -1, -1, -1, -1, -1,
			-1, -1, -1, -1, -1, -1, -1,
			-1, -1, -1, -1, -1, -1, -1,
			7, 0, 0, 0, 0, 0, -32,
			7, 0, 0, 0, 0, 0, -32,
			7, 0, -8, -1, 31, 0, -32,
			7, 0, -2, -1, 127, 0, -32,
			7, 0, -1, -1, -1, 0, -32,
			7, -128, -1, -1, -1, 1, -32,
			7, -64, -1, -1, -1, 3, -32,
			7, -32, -1, -1, -1, 7, -32,
			7, -32, -1, -1, -1, 7, -32,
			7, -32, 1, 0, -128, 7, -32,
			7, -32, 0, 0, 0, 7, -32,
			7, -32, 0, 0, 0, 7, -32,
			7, -32, 0, 0, 0, 7, -32,
			7, -32, 0, 0, 0, 7, -32,
			7, -32, 0, 0, 0, 7, -32,
			7, -32, 0, 0, 0, 7, -32,
			7, -32, 0, 0, 0, 31, -32,
			7, -32, 0, 0, 0, 55, -32,
			7, -32, 0, 0, 0, 103, -32,
			7, -32, 0, 0, 0, -57, -32,
			7, -32, 0, 0, 0, -121, -32,
			7, -32, 0, 0, 0, -121, -31,
			7, -32, 1, 0, -128, 7, -31,
			7, -32, -1, -1, -1, -121, -31,
			7, -64, -1, -1, -1, -125, -32,
			7, -128, -1, -1, -1, -63, -32,
			7, 0, 0, 0, 0, 96, -32,
			7, 0, 0, 0, 0, 32, -32,
			7, -1, -1, -1, -1, -1, -32,
			7, 1, 0, 0, 0, -128, -32,
			-121, -112, 36, 73, -110, 36, -31,
			-121, 0, 0, 0, 0, 0, -31,
			71, 36, 73, -110, 36, 73, -30,
			71, 0, 0, 0, 0, 0, -30,
			39, 0, 0, 0, 0, 0, -28,
			-25, -1, -1, -1, -1, -1, -25,
			7, 0, 0, 0, 0, 0, -32,
			7, 0, 0, 0, 0, 0, -32,
			7, -120, 62, 14, -121, 3, -32,
			7, -120, 8, -111, 72, 4, -32,
			7, -120, 8, -111, 72, 4, -32,
			7, 80, 8, 16, 72, 4, -32,
			7, 80, 8, 8, 68, 4, -32,
			7, 80, 8, 4, 66, 4, -32,
			7, 32, 8, 2, 65, 4, -32,
			7, 32, 8, -127, 64, 4, -32,
			7, 32, 8, -97, -113, 3, -32,
			7, 0, 0, 0, 0, 0, -32,
			7, 0, 0, 0, 0, 0, -32,
			7, 0, 0, 0, 0, 0, -32,
			-1, -1, -1, -1, -1, -1, -1,
			-1, -1, -1, -1, -1, -1, -1,
			-1, -1, -1, -1, -1, -1, -1
		};

main (argc, argv)
int argc;
char *argv[];
{
	int vs, wno, x, y, n;
	char *bitmap2;
	
	bitmap2 = (char *) malloc (sizeof (bitmap));
	memcpy (bitmap2, bitmap, sizeof (bitmap));

	Enter_tools ();
	
	Inq_displayed_vs (&vs);
	Create_win (vs, "Bitmaps!", 30, 30, BX * NX + 30, BY * NY + 30, &wno);
	Display_win (wno);

	for (n = 0; n < atoi (argv[1]); n++)
	{
		fgcolor (wno, 0);
		rectf (wno, 0, 0, BX * NX - 1, BY * NY - 1);
		fgcolor (wno, -1);

		for (y = 0; y < NY; y++)
		{
			for (x = 0; x < NX; x++)
			{
				drawbitmap (wno, 0xFFFF, x * BX, y * BY,
					    x * BX + BX - 1, y * BY + BY - 1,
					    bitmap2);
			}
		}
	}
	free (bitmap2);
	Exit_tools ();
}
