# Do not alter this SPC information: $Revision: 1.2.44.1 $
!include $(RISDEVDIR)\ristools\include\makeenv.nt
!include $(RISDEVDIR)\risapp\build\defines.nt

IPATH=-I$(RISDEVDIR)\riscom\internal\
	  -I$(RISDEVDIR)\risapp\internal

fast: $(LIBDIR)\I9RIS6.dll $(LIBDIR)\ris.lib

# Update the export and dll I9ris.lib and/or I9RIS6.dll
$(LIBDIR)\I9RIS6.dll: I9ris.def $(RISLIB_OBJS) $(RIS_RESOURCES) $(RIS_DEPENDENT_LIBS)
	@echo.
	@echo 	RISLIB_OBJS RISLIB_RESOURCES  -to-   $@
	@if exist $(LIBDIR)\I9ris.lib del $(LIBDIR)\I9ris.lib
	@if exist $(LIBDIR)\I9ris.exp del $(LIBDIR)\I9ris.exp
    @$(implib) @<<
-machine:$(CPU)
-def:I9ris.def
$(RISLIB_OBJS)
$(RISLIB_RESOURCES)
-out:$(LIBDIR)\I9ris.lib
<<NOKEEP
	@$(link) @<<
$(linkdebug)
-base:0x60770000
-dll
-entry:_DllMainCRTStartup$(DLLENTRY)  
-out:$(LIBDIR)\I9RIS6.dll 
$(LIBDIR)\I9ris.exp $(guilibsdll) $(RISLIB_OBJS) $(RISLIB_RESOURCES) $(RIS_DEPENDENT_LIBS)
<<NOKEEP
	@del $(LIBDIR)\I9ris.lib
	@del $(LIBDIR)\I9ris.exp

# ris.lib
$(LIBDIR)\ris.lib:  $(RIS_DLOAD_OBJS)
	@echo.
	@echo 	RIS_DLOAD_OBJS   -to-   $@
	@cd $(LIBDIR)
	@if exist dld*.obj del dld*.obj
	@copy $(RISDEVDIR)\risapp\dload\$(OBJDIR)\dld*.obj . 
	@if exist ris.lib del ris.lib
	@if exist ris.exp del ris.exp
    @$(implib) @<<
-machine:$(CPU)
$(RIS_TMP_DLOAD_OBJS)
-out:ris.lib
<<NOKEEP
	@del dld*.obj
