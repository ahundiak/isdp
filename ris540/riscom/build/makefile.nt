# Do not alter this SPC information: $Revision: 1.5.3.1 $
!include $(RISDEVDIR)\riscom\build\defines.nt

UMS_MSG_DIR=$(RISDEVDIR)\riscom\config\english\messages
UMS_TXT_DIR=$(RISDEVDIR)\riscom\config\english\messages\src

fast: tpg_flag errors source lib bin
	@cd $(RISDEVDIR)\riscom\build

world: cleanworld subdirs prototypes tpg_flag errors source lib bin
	@cd $(RISDEVDIR)\riscom\build

prototypes:
	@echo.
	@echo 	Making directory $(RISDEVDIR)\riscom\arch
	@cd $(RISDEVDIR)\riscom\arch
	@mk prototypes

	@echo.
	@echo 	Making directory $(RISDEVDIR)\riscom\common
	@cd $(RISDEVDIR)\riscom\common
	@mk prototypes

	@echo.
	@echo 	Making file $(RISDEVDIR)\rissrv\server\sralarm.prt
	@$(RISDEVDIR)\ristools\bin\nt\get_prt $(RISDEVDIR)\rissrv\server\sralarm.c

	@echo.
	@echo 	Making directory $(RISDEVDIR)\riscom\network
	@cd $(RISDEVDIR)\riscom\network
	@mk prototypes

	@echo.
	@echo 	Making directory $(RISDEVDIR)\riscom\parse
	@cd $(RISDEVDIR)\riscom\parse
	@mk prototypes

	@echo.
	@echo 	Making directory $(RISDEVDIR)\riscom\parsetpg
	@cd $(RISDEVDIR)\riscom\parsetpg
	@mk prototypes

	@echo.
	@echo 	Making directory $(RISDEVDIR)\riscom\tcpsr
	@cd $(RISDEVDIR)\riscom\tcpsr
	@mk prototypes

subdirs:
	@echo.
	@echo 	Creating arch subdirectories
	@-mkdir $(RISDEVDIR)\riscom\arch\prt 2>NUL
	@-mkdir $(RISDEVDIR)\riscom\arch\$(OBJDIR) 2>NUL

	@echo.
	@echo 	Creating common subdirectories
	@-mkdir $(RISDEVDIR)\riscom\common\prt 2>NUL
	@-mkdir $(RISDEVDIR)\riscom\common\$(OBJDIR) 2>NUL

	@echo.
	@echo 	Creating rissrv\server\prt subdirectory
	@-mkdir $(RISDEVDIR)\rissrv\server\prt 2>NUL

	@echo.
	@echo 	Creating network subdirectories
	@-mkdir $(RISDEVDIR)\riscom\network\prt 2>NUL
	@-mkdir $(RISDEVDIR)\riscom\network\$(OBJDIR) 2>NUL
	
	@echo.
	@echo 	Creating parse subdirectories
	@-mkdir $(RISDEVDIR)\riscom\parse\prt 2>NUL
	@-mkdir $(RISDEVDIR)\riscom\parse\$(OBJDIR) 2>NUL
	
	@echo.
	@echo 	Creating parsetpg subdirectories
	@-mkdir $(RISDEVDIR)\riscom\parsetpg\prt 2>NUL
	@-mkdir $(RISDEVDIR)\riscom\parsetpg\$(OBJDIR) 2>NUL
	
	@echo.
	@echo 	Creating tcpsr subdirectories
	@-mkdir $(RISDEVDIR)\riscom\tcpsr\prt 2>NUL
	@-mkdir $(RISDEVDIR)\riscom\tcpsr\$(OBJDIR) 2>NUL
	
	@echo.
	@echo 	Creating lib subdirectories
	@-mkdir $(RISDEVDIR)\riscom\lib\$(LIBDIR) 2>NUL
	
	@echo.
	@echo 	Creating bin subdirectories
	@-mkdir $(RISDEVDIR)\riscom\bin\$(BINDIR) 2>NUL

tpg_flag:
	@cd $(RISDEVDIR)\riscom\parsetpg
	@mk tpg_flag

errors:
	
source:
	@echo.
	@echo 	Making directory $(RISDEVDIR)\riscom\arch
	@cd $(RISDEVDIR)\riscom\arch
	@mk

	@echo.
	@echo 	Making directory $(RISDEVDIR)\riscom\common
	@cd $(RISDEVDIR)\riscom\common
	@mk

	@echo.
	@echo 	Making directory $(RISDEVDIR)\riscom\network
	@cd $(RISDEVDIR)\riscom\network
	@mk

	@echo.
	@echo 	Making directory $(RISDEVDIR)\riscom\parse
	@cd $(RISDEVDIR)\riscom\parse
	@mk

	@echo.
	@echo 	Making directory $(RISDEVDIR)\riscom\parsetpg
	@cd $(RISDEVDIR)\riscom\parsetpg
	@mk

	@echo.
	@echo 	Making directory $(RISDEVDIR)\riscom\tcpsr
	@cd $(RISDEVDIR)\riscom\tcpsr
	@mk


lib:
	@echo.
	@echo 	Making directory $(RISDEVDIR)\riscom\lib
	@cd $(RISDEVDIR)\riscom\lib
	@mk

bin:
	@echo.
	@echo 	Making directory $(RISDEVDIR)\riscom\bin
	@cd $(RISDEVDIR)\riscom\bin
	@mk

cleanworld: cleanobjdir cleanmakeout cleanlib cleanbin

cleanobjdir:
	@echo.
	@echo 	Cleaning object directories
	@-del/q $(RISDEVDIR)\riscom\arch\$(OBJDIR)\* 2>NUL
	@-del/q $(RISDEVDIR)\riscom\common\$(OBJDIR)\* 2>NUL
	@-del/q $(RISDEVDIR)\riscom\network\$(OBJDIR)\* 2>NUL
	@-del/q $(RISDEVDIR)\riscom\parse\$(OBJDIR)\* 2>NUL
	@-del/q $(RISDEVDIR)\riscom\parsetpg\$(OBJDIR)\* 2>NUL
	@-del/q $(RISDEVDIR)\riscom\tcpsr\$(OBJDIR)\* 2>NUL

cleanmakeout:
	@echo.
	@echo 	Cleaning makeout
	@-del/q $(RISDEVDIR)\riscom\arch\makeout 2>NUL
	@-del/q $(RISDEVDIR)\riscom\common\makeout 2>NUL
	@-del/q $(RISDEVDIR)\riscom\network\makeout 2>NUL
	@-del/q $(RISDEVDIR)\riscom\parse\makeout 2>NUL
	@-del/q $(RISDEVDIR)\riscom\parsetpg\makeout 2>NUL
	@-del/q $(RISDEVDIR)\riscom\tcpsr\makeout 2>NUL

cleanprototypes:
	@echo.
	@echo 	Cleaning prototypes
	@-del/q $(RISDEVDIR)\riscom\arch\prt\* 2>NUL
	@-del/q $(RISDEVDIR)\riscom\common\prt\* 2>NUL
	@-del/q $(RISDEVDIR)\riscom\network\prt\* 2>NUL
	@-del/q $(RISDEVDIR)\riscom\parse\prt\* 2>NUL
	@-del/q $(RISDEVDIR)\riscom\parsetpg\prt\* 2>NUL
	@-del/q $(RISDEVDIR)\riscom\tcpsr\prt\* 2>NUL

cleanlib:
	@echo.
	@echo 	Cleaning lib
	@-del/q $(RISDEVDIR)\riscom\lib\$(LIBDIR)\* 2>NUL

cleanbin:
	@echo.
	@echo 	Cleaning bin
	@-del/q $(RISDEVDIR)\riscom\bin\$(BINDIR)\* 2>NUL
	@cd $(RISDEVDIR)\riscom\bin

backuplist backlist:
	@bckup.bat -l

backupzip backzip:
	@bckup.bat -z

backuptree backtree:
	@bckup.bat -t
