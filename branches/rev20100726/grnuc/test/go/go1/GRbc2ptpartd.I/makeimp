.SUFFIXES: .I .c .o

OPPFLAGS =  \
	-I/usr/ip32/grnuc/include \
	-I/usr/ip32/exnuc/include \
	-I/usr/ip32/bspmath/include \
	-I/usr/ip32/grnuc/spec \
	-I/usr/ip32/exnuc/spec \
	-I$(SRC)

CC = acc -knr
COPT=-g
OPPOPT=-l
OMCPPOPT=-l

IPATH =  \
	-I/usr/ip32/grnuc/include \
	-I/usr/ip32/exnuc/include \
	-I/usr/ip32/bspmath/include

SRC = /usr/ip32/grnuc/test/go/go1/GRbc2ptpartd.I

opp = /usr/ip32/exnuc/bin/opp

omcpp = /usr/ip32/exnuc/bin/omcpp

MOPT = -Dclipper=1 -D__clipper__=1


# Object files 

imp_objects = \
	GRbc2ptpartd.o

objects = \
	$(imp_objects) 


# src group targets

/usr/tmp/TS2ptpartd.o: $(objects)
	@echo 
	ld -r -o /usr/tmp/TS2ptpartd.o $(objects)
	@echo; rm -f opp.list cc.list
	@ls -ls /usr/tmp/TS2ptpartd.o; echo

GRbc2ptpartd.o : \
	$(SRC)/GRbc2ptpartd.I \
	/usr/ip32/grnuc/spec/GRnotify.S \
	/usr/ip32/exnuc/include/OMimport.h \
	/usr/ip32/exnuc/include/OMtypes.h \
	/usr/ip32/exnuc/include/OMminimum.h \
	/usr/ip32/exnuc/include/OMprimitives.h \
	/usr/ip32/exnuc/include/OMdeport.h \
	/usr/ip32/exnuc/spec/Root.S \
	/usr/ip32/exnuc/include/igetypedef.h \
	/usr/ip32/grnuc/include/dp.h \
	/usr/ip32/exnuc/include/OMindex.h \
	/usr/ip32/exnuc/include/OMerrordef.h \
	/usr/ip32/exnuc/include/OMlimits.h \
	/usr/ip32/grnuc/include/igrdef.h \
	/usr/ip32/grnuc/include/maerr.h \
	/usr/ip32/grnuc/include/madef.h \
	/usr/ip32/exnuc/include/ex.h \
	/usr/ip32/grnuc/include/griodef.h \
	/usr/ip32/grnuc/include/grio.h \
	/usr/ip32/grnuc/include/lcdef.h \
	/usr/ip32/grnuc/include/lc.h \
	/usr/ip32/grnuc/include/dpstruct.h \
	/usr/ip32/exnuc/include/fidef.h \
	/usr/ip32/exnuc/include/fi.h \
	/usr/ip32/grnuc/include/report.h \
	/usr/ip32/grnuc/spec/GRgraphics.S \
	/usr/ip32/grnuc/spec/GRconnector.S \
	/usr/ip32/grnuc/include/EMmsg_obj.h \
	/usr/ip32/grnuc/include/emsdattyp.h \
	/usr/ip32/grnuc/include/emsinter.h \
	/usr/ip32/grnuc/spec/GRvg.S \
	/usr/ip32/grnuc/spec/GRcurve.S \
	/usr/ip32/grnuc/spec/GRbspline.S \
	/usr/include/sys/_int_sarg.h \
	/usr/include/_int_sarg.h \
	/usr/include/stdio.h \
	/usr/include/stdlib.h \
	/usr/ip32/exnuc/include/igrtypedef.h \
	/usr/ip32/grnuc/include/godef.h \
	/usr/ip32/grnuc/include/gr.h \
	/usr/ip32/grnuc/include/igr.h \
	/usr/ip32/grnuc/include/igrdp.h \
	/usr/ip32/grnuc/include/go.h \
	/usr/ip32/grnuc/include/grdpbdef.h \
	/usr/ip32/grnuc/include/grdpbmacros.h \
	/usr/ip32/bspmath/include/bserr.h

$(imp_objects) :
	@if [ "$(WHY)" ]; then echo "\t$(SRC)/$(@F:.o=.I): $?"; fi
	@echo "\t$(SRC)/$(@:.o=.I) -> $(@:.o=.c)"
	@if [ -n "$(@D)" ]; then cd $(@D); fi; \
	 $(opp) $(OPPOPT) $(OPPFLAGS) $(DOPT) $(DOPT1) $(DOPT2) $(@:.o=.I)
	@if [ -n "$(@D)" ]; then cd $(@D); fi; \
	 if [ "$(FAST)" ]; \
	 then \
	     echo "\t$(@:.o=.c) -> cc.list\c"; \
	     echo "$(@:.o=.c)" >>cc.list; \
	 else \
	     echo "\t$(@:.o=.c) -> $(@)"; \
	     $(CC) $(COPT) $(IPATH) $(MOPT) $(DOPT) $(DOPT1) $(DOPT2) -c $(@F:.o=.c); \
	     if [ "$(COPT)" != "-g" ]; \
	     then \
	         echo "\tremoving $(@:.o=.c)"; \
	         rm $(@F:.o=.c); \
	     else \
	         echo "\tleaving $(@:.o=.c)"; \
	     fi; \
	 fi
	@echo 

.I.o:
	@if [ "$(WHY)" ]; then echo "\t$<: $?"; fi
	@echo "\t$< -> $*.c"
	@$(opp) $(OPPOPT) $(OPPFLAGS) $(DOPT) $(DOPT1) $(DOPT2) $<
	@if [ "$(FAST)" ]; \
	 then \
	     echo "\t$*.c -> cc.list\c"; \
	     echo "$*.c" >>cc.list; \
	 else \
	     echo "\t$*.c -> $*.o"; \
	     $(CC) $(COPT) $(IPATH) $(MOPT) $(DOPT) $(DOPT1) $(DOPT2) -c $*.c; \
	     if [ "$(COPT)" != "-g" ]; \
	     then \
	         echo "\tremoving $*.c"; \
	         rm $*.c; \
	     else \
	         echo "\tleaving $*.c"; \
	     fi; \
	 fi
	@echo 

.c.o:
	@if [ "$(WHY)" ]; then echo "\t$<: $?"; fi
	@echo "\t$< -> $*.o"
	@$(CC) $(COPT) $(IPATH) $(MOPT) $(DOPT) $(DOPT1) $(DOPT2) -c $*.c
	@echo 

