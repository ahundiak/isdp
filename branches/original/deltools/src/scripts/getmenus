trap 'echo $0 Abort.;exit' 1 2 3 13 14 15
VAXMENU='IP32_$prodname.MENU'
PATH=.:/usr/bin:/bin:/etc
export PATH
echo "\n\nVax Based Application Menu Installation Utility\n\n"
if [ ! -d /usr/ip32/igds ]
then echo "\n\nThe ACTEM product has not been loaded yet."
     echo "Please load it first with the \"newprod\" utility located"
     echo "in the DELTOOLS product."
     exit 1
fi
if [ -z "$1" ]
then echo "Enter the host ethernet connect data ---> \c"
     read HD
else HD="$1"
     shift
     prodnames="$*"
fi
if [ -z "$prodnames" ]
then echo "\nEnter the product name(s) of the menus you wish to load,"
     echo "separated by spaces ---> \c"
     read prodnames; echo " "
fi
for prodname in $prodnames
do prodname=`echo $prodname | tr '[a-z]' '[A-Z]'`
   vaxdir="PRO_DD_$prodname"
   eval vaxfile=$VAXMENU
   prodir="/usr/ip32/igds/$prodname"
   mkdir $prodir >/dev/null 2>&1
   cd $prodir
   echo "\n\nDownloading the $prodname menus to $prodir."
   if fmu $HD rec "$vaxdir:$vaxfile" - | cpio -imud >/dev/null 2>&1
   then echo "Successful download of the $prodname menus."
   else echo "There is a problem getting the $prodname menus from $HD."
	echo "Please remedy the problem and try again."
	cd .. >/dev/null 2>&1
	rmdir $prodir  >/dev/null 2>&1
   fi
   sync 
done
exit 0
