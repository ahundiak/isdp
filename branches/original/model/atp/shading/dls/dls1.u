//~Name      : 
//~Originator: yvonne
//~Originated: (RAP) Thu Jul 16 10:57:40 1992
//~Product   : I/EMS 02.01.00.00 08-Jun-92 
//~Nodename  : h11434
//~Command   : 
//~Comments  : 

#include "ciminimum.h"
#include "cimacros.h"
#include "fi.h"
#include <stdio.h>
#include <string.h>

extern char *getenv();

main()
{
	double pt[3];
	struct FI_data_st formData;
        char   str[20], *atp_si_str;
	int    atp_si;

        strcpy(str, "ATP_SI");
    	if ( (atp_si_str = getenv(str)) == NULL)
	{
	    atp_si = 0;
	}
    	else
 	{
	    if (strcmp(atp_si_str, "1") == 0)
		atp_si = 1;
	    else
		atp_si = 1;
	}

	fprintf(stderr, "\nDLS1.LOG: \n\n");

	/*---------------------------------*/
	/* Change active color to yellow   */
   	/* Place line segment with style 6 */
	/*---------------------------------*/

	ci$put(string = "del");
	//"GRDlE" "Delete"

	pt[0] = 7.019400776625673;
	pt[1] = 0.0;
	pt[2] = 6.713359894309331;
	ci$put(point = pt,
		window_name = "iso");

	pt[0] = 11.421344432153276;
	pt[1] = 0.0;
	pt[2] = 9.761486173565274;
	ci$put(point = pt,
		window_name = "iso");

	pt[0] = 12.766382771342264;
	pt[1] = 0.0;
	pt[2] = 6.833598924318165;
	ci$put(point = pt,
		window_name = "iso");

	pt[0] = 12.766382771342264;
	pt[1] = 0.0;
	pt[2] = 6.833598924318165;
	ci$putevent(data = pt,
		response=RESET,
		window_name = "iso");

	ci$put( cmd = "cl st");

	ci$put(string = "s a c");
	//"GRSCl" "Set Active Color"

	ci$put(string = "yellow");

	ci$put(string = "s a s");
	//"GRSSt" "Set Active Style"

	ci$put(string = "6");

	ci$put(string = "pl li seg");
	//"GRPLSg" "Place Line Segment"

	ci$put(cmd_key = "GRSlTnPnKy");	//"GRSlTnPnKy" "Tentative Keypoint Snap"

	pt[0] = 0.022543959751935;
	pt[1] = 9.944606025554764;
	pt[2] = 0.0;
	ci$put(point = pt,
		window_name = "top");

	pt[0] = -3.300169447878716;
	pt[1] = 9.206225268303509;
	pt[2] = 0.0;
	ci$put(point = pt,
		window_name = "top");

	ci$put(cmd_key = "GRSlTnPnKy");	//"GRSlTnPnKy" "Tentative Keypoint Snap"

	pt[0] = 9.990684182643887;
	pt[1] = 9.944606025554764;
	pt[2] = 0.0;
	ci$put(point = pt,
		window_name = "top");

	pt[0] = 12.205826454397657;
	pt[1] = 8.362361545730645;
	pt[2] = 0.0;
	ci$put(point = pt,
		window_name = "top");

	ci$put( cmd = "cl st");

	/*----------------------------*/
	/* Define new line style 9    */ 
	/* Place line using new style */
	/*----------------------------*/

	ci$put(string = "d l s");
	//"GRDfLnSt" "Define Line Style"

	formData.label = 15;
	formData.type = FI_INT;
	formData.index = 0;
	formData.max_index = 0;
	formData.select_flag = FI_EDIT_NOSELECT;
	formData.sts = 0;
	formData.value.ivalue = 9;
	ci$put (form = "GRDefineLine",
		gadget = &formData);

	formData.label = 15;
	formData.type = FI_INT;
	formData.index = 0;
	formData.max_index = 0;
	formData.select_flag = FI_EDIT_NOSELECT;
	formData.sts = 0;
	formData.value.ivalue = 9;
	ci$put (form = "GRDefineLine",
		gadget = &formData);

	formData.label = 19;
	formData.type = FI_STATE;
	formData.index = 0;
	formData.max_index = 0;
	formData.select_flag = FI_EDIT_NOSELECT;
	formData.sts = 0;
	formData.value.state = 0;
	ci$put (form = "GRDefineLine",
		gadget = &formData);

	formData.label = 21;
	formData.type = FI_STATE;
	formData.index = 0;
	formData.max_index = 0;
	formData.select_flag = FI_EDIT_NOSELECT;
	formData.sts = 0;
	formData.value.state = 0;
	ci$put (form = "GRDefineLine",
		gadget = &formData);

	formData.label = 23;
	formData.type = FI_STATE;
	formData.index = 0;
	formData.max_index = 0;
	formData.select_flag = FI_EDIT_NOSELECT;
	formData.sts = 0;
	formData.value.state = 0;
	ci$put (form = "GRDefineLine",
		gadget = &formData);

	formData.label = 24;
	formData.type = FI_STATE;
	formData.index = 0;
	formData.max_index = 0;
	formData.select_flag = FI_EDIT_NOSELECT;
	formData.sts = 0;
	formData.value.state = 0;
	ci$put (form = "GRDefineLine",
		gadget = &formData);

	formData.label = 26;
	formData.type = FI_STATE;
	formData.index = 0;
	formData.max_index = 0;
	formData.select_flag = FI_EDIT_NOSELECT;
	formData.sts = 0;
	formData.value.state = 0;
	ci$put (form = "GRDefineLine",
		gadget = &formData);

	formData.label = 28;
	formData.type = FI_STATE;
	formData.index = 0;
	formData.max_index = 0;
	formData.select_flag = FI_EDIT_NOSELECT;
	formData.sts = 0;
	formData.value.state = 0;
	ci$put (form = "GRDefineLine",
		gadget = &formData);

	formData.label = 29;
	formData.type = FI_STATE;
	formData.index = 0;
	formData.max_index = 0;
	formData.select_flag = FI_EDIT_NOSELECT;
	formData.sts = 0;
	formData.value.state = 0;
	ci$put (form = "GRDefineLine",
		gadget = &formData);

	formData.label = 31;
	formData.type = FI_STATE;
	formData.index = 0;
	formData.max_index = 0;
	formData.select_flag = FI_EDIT_NOSELECT;
	formData.sts = 0;
	formData.value.state = 0;
	ci$put (form = "GRDefineLine",
		gadget = &formData);

	formData.label = 33;
	formData.type = FI_STATE;
	formData.index = 0;
	formData.max_index = 0;
	formData.select_flag = FI_EDIT_NOSELECT;
	formData.sts = 0;
	formData.value.state = 0;
	ci$put (form = "GRDefineLine",
		gadget = &formData);

	formData.label = 34;
	formData.type = FI_STATE;
	formData.index = 0;
	formData.max_index = 0;
	formData.select_flag = FI_EDIT_NOSELECT;
	formData.sts = 0;
	formData.value.state = 0;
	ci$put (form = "GRDefineLine",
		gadget = &formData);

	formData.label = 16;
	formData.type = FI_STATE;
	formData.index = 1;
	formData.max_index = 0;
	formData.select_flag = FI_EDIT_NOSELECT;
	formData.sts = 0;
	formData.value.state = 1;
	ci$put (form = "GRDefineLine",
		gadget = &formData);

	formData.label = 1;
	formData.type = FI_STATE;
	formData.index = 1;
	formData.max_index = 0;
	formData.select_flag = FI_EDIT_NOSELECT;
	formData.sts = 0;
	formData.value.state = 1;
	ci$put (form = "GRDefineLine",
		gadget = &formData);

	ci$put(string = "pl li seg");
	//"GRPLSg" "Place Line Segment"

	ci$put(cmd_key = "GRSlTnPnKy");	//"GRSlTnPnKy" "Tentative Keypoint Snap"

	pt[0] = 0.128026925073543;
	pt[1] = 0.029207285323615;
	pt[2] = 0.0;
	ci$put(point = pt,
		window_name = "top");

	pt[0] = -2.087115346680225;
	pt[1] = -0.392724575962818;
	pt[2] = 0.0;
	ci$put(point = pt,
		window_name = "top");

	ci$put(cmd_key = "GRSlTnPnKy");	//"GRSlTnPnKy" "Tentative Keypoint Snap"

	pt[0] = 0.022543959751935;
	pt[1] = 9.997347508215569;
	pt[2] = 0.0;
	ci$put(point = pt,
		window_name = "top");

	pt[0] = -2.720013138609873;
	pt[1] = 8.573327476373860;
	pt[2] = 0.0;
	ci$put(point = pt,
		window_name = "top");

	ci$put( cmd = "cl st");
                     
        ci$put(cmd = "ci=snapshot");

        if (atp_si)
            save_image("tmp/iso1.rgb", "iso");
}


save_image(filename, win_name)
        char *filename, *win_name;
{ 
	ci$put(cmd = "s i");

	ci$put(string = filename);

	ci$put(string = "w");

	ci$put(string = win_name);

        ci$put(response = TERMINATE);
}
                     
