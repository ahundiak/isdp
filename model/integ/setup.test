MADELINK=n
cd $MDTARG
for sym in config/english/forms config/english/icons config/english/message_file config/spheres config/textures config/commands emsppp/config/cmd_tbl_list emsppp/config/emsppp.m02cmd emsppp/config/init.cmd emsult/config/cmd_tbl_list emsult/config/emsult.m02cmd emsult/config/init.cmd ems/emsui02/config/english/palettes ems/emsui02/config/english/icons ems/emsui02/config/popups ems/emsuiu/config/english/palettes ems/emsuiu/config/english/icons ems/emsuiu/config/popups config/english/messages config/OMsysgen.par
do
  cd `dirname $sym`
  if [ ! -L `basename $sym` ]
  then
     if [ -d `basename $sym` ]
     then 
       errrpt $0 "$MDTARG/$sym is a directory, please remove before proceeding"
       exit 1
     fi
     echo "ln -s $MODEL/$sym `basename $sym`"
     ln -s $MODEL/$sym `basename $sym`
     MADELINK=y
  else
     echo "$MODEL/$sym `basename $sym` ... symbolic link already exist"
  fi
  cd $MDTARG
done

#copy the product_data file from $HOME/integ to $INGRHOME. I am doing
#this only on non-SGI platforms,because 'rootsetuid' does not exist on
#SGI. On SGI I am putting out a message instead.
# SM 3/27/93

TARGET_OS=`uname -s`

case ${TARGET_OS} in
CLIX)
   export INGRHOME=${INGRHOME:-/usr/ip32}
   if [ "$INGRHOME" = "/dev/null" ]
   then
     INGRHOME=/usr/ip32
   fi
;; # End of CLIX
SunOS)
   OSver="$(uname -r | cut -c1-3)"
   case $OSver in
   4.1)
     export INGRHOME=${INGRHOME:-/usr/ip32}
   ;;
   5.[1-9])
     export INGRHOME=${INGRHOME:-/opt/ingr}
   ;;
   *)
     echo
     echo "Unsupported SunOS version $OSver"
     echo
     exit 1
     ;;
   esac
;; # End of SunOS
IRIX)
   OSver="$(uname -r | cut -c1)"
   case $OSver in
   5)
     export INGRHOME=${INGRHOME:-/var/opt/ingr}
     ;;
   *)
     echo
     echo "Unsupported IRIX version $OSver"
     echo
     exit 1
     ;;
   esac
;; # End of IRIX
*)
   echo
   echo "Unknown TARGET Operation System \"$TARGET_OS\""
   echo
   exit 1
;;
esac  # End of TARGET_OS case

necho ""
necho ""
necho "COPYING $HOME/integ/prod.model to $INGRHOME/product_data"
necho "Previous product_data is saved in $INGRHOME/prod.last"
rootsetuid "cp $INGRHOME/product_data $INGRHOME/prod.last"
rootsetuid "cp $HOME/integ/prod.model $INGRHOME/product_data"


#copy $MODEL/ems/bin/ems to $MDTARG/ems/bin/ems as part of setting up the
#test environment.
# SM 3/27/93

necho ""
necho ""
if [ ! -d "$MDTARG/ems" ]
then
  necho '$MDTARG/ems directory DID NOT exist...creating it.'
  mkdir $MDTARG/ems
fi

if [ ! -d "$MDTARG/ems/bin" ]
then
  necho '$MDTARG/ems/bin directory DID NOT exist...creating it.'
  mkdir $MDTARG/ems/bin
fi
necho 'COPYING $MODEL/ems/bin/ems to $MDTARG/ems/bin/ems'
cp $MODEL/ems/bin/ems $MDTARG/ems/bin/ems

if [ "$MADELINK" = "n" ] 
then 
    echo ".....setup.test everything in place"
fi
