//~Name      : 
//~Originator: yvonne
//~Originated: (RAP) Tue Jun 23 09:45:01 1992
//~Product   : I/EMS 02.01.00.00 08-Jun-92 
//~Nodename  : h11434
//~Command   : 
//~Comments  : 

#include "ciminimum.h"
#include "cimacros.h"
#include "fi.h"
#include <stdio.h>
#include <string.h>

extern char *getenv();

main()
{
	double pt[3];
	struct FI_data_st formData;
        char   str[20], *atp_si_str;
	int    atp_si;

        strcpy(str, "ATP_SI");
    	if ( (atp_si_str = getenv(str)) == NULL)
	{
	    atp_si = 0;
	}
    	else
 	{
	    if (strcmp(atp_si_str, "1") == 0)
		atp_si = 1;
	    else
		atp_si = 1;
	}

	fprintf(stderr, "\nCVE2.LOG: \n\n");

	/*-------------------------------------*/
	/* med-res cve on sm-shaded iso window */
	/*-------------------------------------*/

        ci$put(string = "s w d m");
        //"HSTgVDsMd" "Set Window Display Mode"

        ci$put(string = "iso");

        ci$put( cmd = "cl st");

	ci$put(string = "c v e");
	//"VECrVsEd" "Create Visible Edges"

	ci$put(string = "iso");

	ci$put( cmd = "st d");
	//"GRStFr" "Status Display Form"

	formData.label = 26;
	formData.type = FI_ALPHA;
	formData.index = 0;
	formData.max_index = 0;
	formData.select_flag = FI_EDIT_NOSELECT;
	formData.sts = 0;
	strcpy(formData.value.alpha,"Medium");
	ci$put (form = "HLCreatEdges",
		gadget = &formData);

	formData.label = 20;
	formData.type = FI_ALPHA;
	formData.index = 0;
	formData.max_index = 0;
	formData.select_flag = FI_EDIT_NOSELECT;
	formData.sts = 0;
	strcpy(formData.value.alpha,"original");
	ci$put (form = "HLCreatEdges",
		gadget = &formData);

	formData.label = 21;
	formData.type = FI_ALPHA;
	formData.index = 0;
	formData.max_index = 0;
	formData.select_flag = FI_EDIT_NOSELECT;
	formData.sts = 0;
	strcpy(formData.value.alpha,"original");
	ci$put (form = "HLCreatEdges",
		gadget = &formData);

	formData.label = 19;
	formData.type = FI_ALPHA;
	formData.index = 0;
	formData.max_index = 0;
	formData.select_flag = FI_EDIT_NOSELECT;
	formData.sts = 0;
	strcpy(formData.value.alpha,"green");
	ci$put (form = "HLCreatEdges",
		gadget = &formData);

	formData.label = 1;
	formData.type = FI_STATE;
	formData.index = 1;
	formData.max_index = 0;
	formData.select_flag = FI_EDIT_NOSELECT;
	formData.sts = 0;
	formData.value.state = 1;
	ci$put (form = "HLCreatEdges",
		gadget = &formData);

	pt[0] = -11.688859759366629;
	pt[1] = 0.0;
	pt[2] = -5.923493873218872;
	ci$putevent(data = pt,
		response=RESET,
		window_name = "iso");
	//"GRSlEInV" "Elements in View"

	ci$put(string = "s a l");
	//"GRSLy" "Set Active Layer"

	ci$put(string = "1023");

	ci$put(string = "lay off");
	//"GRTrOfLy" "Layers Off"

	ci$put(string = "1");

	pt[0] = -4.719115638114594;
	pt[1] = 0.0;
	pt[2] = 0.420524461193125;
	ci$put(point = pt,
		window_name = "iso");

	ci$put(response = TERMINATE);

	ci$put(string = "up win");
	//"GRUpV" "Update Window"

	ci$put(string = "iso");

	ci$put(response = TERMINATE);


	/*--------------------------------------*/
	/*   Cleanup/save image of iso window.  */
	/*--------------------------------------*/

        ci$put(cmd = "ci=snapshot");

        if (atp_si)
            save_image("tmp/iso21.rgb", "iso");

	/*--------------------------------------*/
	/*   Run high res cve on Front window   */
	/*   after setting the results layers   */
	/*   to 1000 and 1001.                  */
	/*--------------------------------------*/  

	ci$put(string = "c v e");
	//"VECrVsEd" "Create Visible Edges"

	ci$put(string = "front");

	ci$put( cmd = "st d");
	//"GRStFr" "Status Display Form"

	formData.label = 14;
	formData.type = FI_STATE;
	formData.index = 1;
	formData.max_index = 0;
	formData.select_flag = FI_EDIT_NOSELECT;
	formData.sts = 0;
	formData.value.state = 1;
	ci$put (form = "HLCreatEdges",
		gadget = &formData);

	formData.label = 47;
	formData.type = FI_ALPHA;
	formData.index = 0;
	formData.max_index = 0;
	formData.select_flag = FI_EDIT_NOSELECT;
	formData.sts = 0;
	strcpy(formData.value.alpha,"1000");
	ci$put (form = "HLCreatEdges",
		gadget = &formData);

	formData.label = 49;
	formData.type = FI_ALPHA;
	formData.index = 0;
	formData.max_index = 0;
	formData.select_flag = FI_EDIT_NOSELECT;
	formData.sts = 0;
	strcpy(formData.value.alpha,"1001");
	ci$put (form = "HLCreatEdges",
		gadget = &formData);

	formData.label = 26;
	formData.type = FI_ALPHA;
	formData.index = 0;
	formData.max_index = 0;
	formData.select_flag = FI_EDIT_NOSELECT;
	formData.sts = 0;
	strcpy(formData.value.alpha,"high");
	ci$put (form = "HLCreatEdges",
		gadget = &formData);

	formData.label = 1;
	formData.type = FI_STATE;
	formData.index = 1;
	formData.max_index = 0;
	formData.select_flag = FI_EDIT_NOSELECT;
	formData.sts = 0;
	formData.value.state = 1;
	ci$put (form = "HLCreatEdges",
		gadget = &formData);

	pt[0] = -11.688859759366629;
	pt[1] = 0.0;
	pt[2] = -5.923493873218872;
	ci$putevent(data = pt,
		response=RESET,
		window_name = "front");
	//"GRSlEInV" "Elements in View"

	/*----------------------------------------*/
	/*  need to set active layer to 1000 and  */
	/*  turn off layers from previous calls   */
        /*  to Create Visible Edges.              */
        /*----------------------------------------*/

	ci$put(string = "s a l");
	//"GRSLy" "Set Active Layer"

	ci$put(string = "1000");

	ci$put(string = "lay off");
	//"GRTrOfLy" "Layers Off"

	ci$put(string = "1");

	pt[0] = -4.719115638114594;
	pt[1] = 0.0;
	pt[2] = 0.420524461193125;
	ci$put(point = pt,
		window_name = "front");

	ci$put(response = TERMINATE);

	ci$put(string = "lay off");
	//"GRTrOfLy" "Layers Off"

	ci$put(string = "1022");

	pt[0] = -4.719115638114594;
	pt[1] = 0.0;
	pt[2] = 0.420524461193125;
	ci$put(point = pt,
		window_name = "front");

	ci$put(response = TERMINATE);

	ci$put(string = "lay off");
	//"GRTrOfLy" "Layers Off"

	ci$put(string = "1023");

	pt[0] = -4.719115638114594;
	pt[1] = 0.0;
	pt[2] = 0.420524461193125;
	ci$put(point = pt,
		window_name = "front");

	ci$put(response = TERMINATE);

	ci$put(string = "up win");
	//"GRUpV" "Update Window"

	ci$put(string = "front");

	ci$put(response = TERMINATE);


        ci$put(cmd = "ci=snapshot");

        if (atp_si)
            save_image("tmp/front21.rgb", "front");

	/*--------------------------------------*/
	/*   Run low res cve on top window      */
	/*   after setting the results layers   */
	/*   to 1010 and 1011 and changing the  */
	/*   hidden display parameters.         */
	/*--------------------------------------*/  

	ci$put(string = "c v e");
	//"VECrVsEd" "Create Visible Edges"

	ci$put(string = "top");

	ci$put( cmd = "st d");
	//"GRStFr" "Status Display Form"

	formData.label = 14;
	formData.type = FI_STATE;
	formData.index = 1;
	formData.max_index = 0;
	formData.select_flag = FI_EDIT_NOSELECT;
	formData.sts = 0;
	formData.value.state = 1;
	ci$put (form = "HLCreatEdges",
		gadget = &formData);

	formData.label = 47;
	formData.type = FI_ALPHA;
	formData.index = 0;
	formData.max_index = 0;
	formData.select_flag = FI_EDIT_NOSELECT;
	formData.sts = 0;
	strcpy(formData.value.alpha,"1010");
	ci$put (form = "HLCreatEdges",
		gadget = &formData);

	formData.label = 49;
	formData.type = FI_ALPHA;
	formData.index = 0;
	formData.max_index = 0;
	formData.select_flag = FI_EDIT_NOSELECT;
	formData.sts = 0;
	strcpy(formData.value.alpha,"1011");
	ci$put (form = "HLCreatEdges",
		gadget = &formData);

	formData.label = 26;
	formData.type = FI_ALPHA;
	formData.index = 0;
	formData.max_index = 0;
	formData.select_flag = FI_EDIT_NOSELECT;
	formData.sts = 0;
	strcpy(formData.value.alpha,"low");
	ci$put (form = "HLCreatEdges",
		gadget = &formData);

	formData.label = 19;
	formData.type = FI_ALPHA;
	formData.index = 0;
	formData.max_index = 0;
	formData.select_flag = FI_EDIT_NOSELECT;
	formData.sts = 0;
	strcpy(formData.value.alpha,"240");
	ci$put (form = "HLCreatEdges",
		gadget = &formData);

	formData.label = 20;
	formData.type = FI_ALPHA;
	formData.index = 0;
	formData.max_index = 0;
	formData.select_flag = FI_EDIT_NOSELECT;
	formData.sts = 0;
	strcpy(formData.value.alpha,"127");
	ci$put (form = "HLCreatEdges",
		gadget = &formData);

	formData.label = 21;
	formData.type = FI_ALPHA;
	formData.index = 0;
	formData.max_index = 0;
	formData.select_flag = FI_EDIT_NOSELECT;
	formData.sts = 0;
	strcpy(formData.value.alpha,"31");
	ci$put (form = "HLCreatEdges",
		gadget = &formData);

	formData.label = 1;
	formData.type = FI_STATE;
	formData.index = 1;
	formData.max_index = 0;
	formData.select_flag = FI_EDIT_NOSELECT;
	formData.sts = 0;
	formData.value.state = 1;
	ci$put (form = "HLCreatEdges",
		gadget = &formData);

	pt[0] = -11.688859759366629;
	pt[1] = 0.0;
	pt[2] = -5.923493873218872;
	ci$putevent(data = pt,
		response=RESET,
		window_name = "top");
	//"GRSlEInV" "Elements in View"

	/*----------------------------------------*/
	/*  need to set active layer to 1010 and  */
	/*  turn off layers from previous calls   */
        /*  to Create Visible Edges.              */
        /*----------------------------------------*/

	ci$put(string = "s a l");
	//"GRSLy" "Set Active Layer"

	ci$put(string = "1010");

	ci$put(string = "lay off");
	//"GRTrOfLy" "Layers Off"

	ci$put(string = "1");

	pt[0] = -4.719115638114594;
	pt[1] = 0.0;
	pt[2] = 0.420524461193125;
	ci$put(point = pt,
		window_name = "top");

	ci$put(response = TERMINATE);

	ci$put(string = "lay off");
	//"GRTrOfLy" "Layers Off"

	ci$put(string = "1022");

	pt[0] = -4.719115638114594;
	pt[1] = 0.0;
	pt[2] = 0.420524461193125;
	ci$put(point = pt,
		window_name = "top");

	ci$put(response = TERMINATE);

	ci$put(string = "lay off");
	//"GRTrOfLy" "Layers Off"

	ci$put(string = "1023");

	pt[0] = -4.719115638114594;
	pt[1] = 0.0;
	pt[2] = 0.420524461193125;
	ci$put(point = pt,
		window_name = "top");

	ci$put(response = TERMINATE);

	ci$put(string = "lay off");
	//"GRTrOfLy" "Layers Off"

	ci$put(string = "1000");

	pt[0] = -4.719115638114594;
	pt[1] = 0.0;
	pt[2] = 0.420524461193125;
	ci$put(point = pt,
		window_name = "top");

	ci$put(response = TERMINATE);

	ci$put(string = "lay off");
	//"GRTrOfLy" "Layers Off"

	ci$put(string = "1001");

	pt[0] = -4.719115638114594;
	pt[1] = 0.0;
	pt[2] = 0.420524461193125;
	ci$put(point = pt,
		window_name = "top");

	ci$put(response = TERMINATE);

	ci$put(string = "up win");
	//"GRUpV" "Update Window"

	ci$put(string = "top");

	ci$put(response = TERMINATE);

        ci$put(cmd = "ci=snapshot");

        if (atp_si)
            save_image("tmp/top21.rgb", "top");
}


save_image(filename, win_name)
        char *filename, *win_name;
{
        ci$put(cmd = "s i");

        ci$put(string = filename);

        ci$put(string = "w");

        ci$put(string = win_name);

        ci$put(response = TERMINATE);
}
                   
